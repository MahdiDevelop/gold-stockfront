"use strict";(self.webpackChunkdentest=self.webpackChunkdentest||[]).push([[754],{25565:(e,t,a)=>{a.d(t,{A:()=>p});var n=a(89379),o=a(65043),s=a(62299),i=a(79722),r=a(85875),l=a(30064),d=a.n(l),c=a(89577),m=(a(24452),a(61682),a(23603),a(10068),a(37698),a(70579));function p(e){let{inputRef:t,belancem:a,setbelance:l,close:p,id:u,accountbelance:h,belance1:f,openBelance:b,setEditAccount:x,moneys:g,money:y,setmoney:w,customer:_,setcustomer:j,idprof:N,prof:v,setMoney:A}=e;const S=h,[C,k]=(0,o.useState)({user:localStorage.getItem("userTokenid"),discription:"",amount:"",type:"deposite",account:0,cash:0,date:""}),[z,F]=(0,o.useState)(""),[D,I]=(0,o.useState)({belance:0,account:1,type:1}),W=e=>{k((0,n.A)((0,n.A)({},C),{},{[e.target.name]:e.target.value,user:parseInt(localStorage.getItem("userTokenid"))}))},[T,B]=(0,o.useState)("");const[R,L]=(0,o.useState)([]),[K,P]=(0,o.useState)({belance:0,account:0,type:0,delete:"False",user:0}),[U,E]=(0,o.useState)("");return(0,m.jsxs)("div",{className:"container rounded-5 pe-0 ps-0 resB popup ".concat(b?"show":""),children:[(0,m.jsx)("div",{className:"d-flex justify-content-end p-0 m-0",children:(0,m.jsx)("button",{type:"button",className:"btn-close align-self-end p-3 m-1 mt-0 hover_btn",onClick:p,"aria-label":"Close"})}),(0,m.jsxs)("div",{className:" bg-white container mt-0 p-1 pt-0 col-lg-8 rounded-5",style:{width:"94%"},children:[(0,m.jsx)("h1",{className:"text-center rounded m-0 p-4 text-light mt-0",style:{backgroundColor:"var(--bs-info)"},children:"Availability"}),(0,m.jsxs)("div",{className:"balance-container row mt-4 p-4 pb-0 mb-0",children:[h&&h.map(e=>(0,m.jsx)("div",{className:"col-12 col-md-3 mb-3",children:(0,m.jsx)("div",{className:"card border-0",style:{color:"white",backgroundColor:"#5394a1"},children:(0,m.jsxs)("div",{className:"card-body py-4",children:[(0,m.jsx)("h5",{className:"mb-2 fw-bold text-capitalize",children:e.moneyType}),(0,m.jsxs)("p",{className:"mb-2 fw-bold",children:[e.belance," Available"]})]})})},e.id)),(0,m.jsx)("div",{className:"col-12 col-md-3 mb-3",children:(0,m.jsx)("div",{className:"card border-0",style:{color:"white",backgroundColor:"#5394a1"},children:(0,m.jsxs)("div",{className:"btn-group dropdown",style:{color:"white",backgroundColor:"#5394a1"},children:[(0,m.jsxs)("button",{type:"button",onClick:()=>(()=>{if(Array.isArray(y)&&y.length>0){const e=[];y.forEach(t=>{t&&void 0!==t.id&&null!==t.id&&(Array.isArray(h)&&h.length>0&&h.some(e=>e.type_id===t.id)||e.push(t))}),L(e.length>0?e:[])}})(),className:"btn btn-secondary dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",style:{color:"white",backgroundColor:"#5394a1"},children:[(0,m.jsx)("p",{children:"Add Balance"}),(0,m.jsx)("img",{src:s,alt:"Add",style:{height:"40%",width:"20%"}})]}),(0,m.jsx)("ul",{className:"dropdown-menu pe-5",children:R.length>0?R.map(e=>(0,m.jsx)("li",{children:(0,m.jsx)("button",{onClick:()=>{(e=>{let t={id:0,account:1,type:1,user:0,belance:0,delete:"False",moneyType:""};P((0,n.A)((0,n.A)({},K),{},{type:e.id}));const a=new FormData;a.append("isdelete","False"),a.append("user",localStorage.getItem("userTokenid")),a.append("type",e.id),a.append("account",u);const o=new Date;let s={isdelete:0,user_id:localStorage.getItem("userTokenid"),type_id:e.id,account_id:u,belance:"0",date_created:o.toISOString()};i.A.post(r.A.getAddress()+"/api/belance",s,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))}}).then(e=>{t=e.data.belance,x([...h,t]),L(e=>e.filter(e=>e.id!==t.id)),d().fire({position:"top-end",icon:"success",title:"Updated successfully!",showConfirmButton:!1,timer:600})}).catch(e=>{d().fire({position:"top-end",icon:"error",title:"Something went wrong !",showConfirmButton:!1,timer:1500})})})(e)},className:"dropdown-item fw-bold",type:"button",children:e.name})},e.id)):(0,m.jsx)("li",{children:(0,m.jsx)("button",{className:"dropdown-item fw-bold",type:"button",children:"Empty"})})})]})})})]}),(0,m.jsxs)("form",{className:"form-section col-12 w-100 row rounded-3 m-3 pe-5 p-1 bg-transparent pt-0 mt-0 mb-0",children:[(0,m.jsx)("div",{className:"col-12 col-md-4 m-2 mt-3 ps-2 p-0",children:(0,m.jsxs)("div",{className:"form-floating",children:[(0,m.jsx)("textarea",{name:"discription",ref:t,onChange:e=>{W(e)},value:C.discription,className:"form-control h-50 px-5",placeholder:"Leave a comment here",id:"floatingTextarea2"}),(0,m.jsx)("label",{htmlFor:"floatingTextarea2",children:"Description"})]})}),(0,m.jsxs)("div",{className:"col-12 col-md-2 m-2 mb-3 mt-3 p-0 px-3",children:[(0,m.jsx)("label",{for:"price",children:"Amount"}),(0,m.jsx)(c.HG,{thousandSeparator:!0,name:"amount",className:"form-control",value:U,placeholder:"0",onChange:e=>{let t=new Date;const a={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDay()},{year:o,month:s,day:i}=a,r=(new Date,(new Date).toISOString()),l=e.target.value,d=l.replace(/,/g,"").replace("$","");E(l),k((0,n.A)((0,n.A)({},C),{},{amount:d,date:r}))}})]}),(0,m.jsxs)("div",{className:"col-12 col-md-2 m-2 mt-3 px-3",children:[(0,m.jsx)("label",{htmlFor:"category",children:"Money Type"}),(0,m.jsxs)("select",{name:"type1",id:"category",onChange:e=>{const t=S.filter(t=>t.moneyType===e.target.value);B(t[0].type),F(e.target.value),k((0,n.A)((0,n.A)({},C),{},{account:t[0].id}))},value:z,className:"form-select",children:[(0,m.jsx)("option",{value:"",disabled:!0,children:"Select"}),h&&h.map(e=>(0,m.jsx)("option",{value:e.moneyType,children:e.moneyType},e.id))]})]}),(0,m.jsxs)("div",{className:"col-12 col-md-2 m-2 mt-3 px-3",children:[(0,m.jsx)("label",{htmlFor:"category",children:"Type"}),(0,m.jsxs)("select",{name:"type",id:"category",onChange:W,value:C.type,className:"form-select",children:[(0,m.jsx)("option",{value:"deposite",children:"Deposite"}),(0,m.jsx)("option",{value:"withdraw",children:"Withdraw"})]})]}),(0,m.jsx)("div",{className:"col-12 col-md-1 p-0 mt-3",children:(0,m.jsx)("button",{onClick:()=>{if(0!=C.amount&&null!=C.amount&&""!=C.type&&""!=z){const e=h.filter(e=>e.type===T);if(0===e.length)return void d().fire({position:"top-end",icon:"error",title:"Something went wrong !",showConfirmButton:!1,timer:1500});parseInt(e[0].belance),parseInt(C.amount);new FormData;let t={user_id:localStorage.getItem("userTokenid"),discription:"",amount:"",type:"deposite",account_id:0,isdelete:0,cash:0,date_created:""};t.discription=C.discription,t.amount=C.amount,t.type=C.type,t.account_id=C.account,t.cash=C.cash;let a=new Date;t.date_created=a.toISOString(),i.A.post("".concat(r.A.getAddress(),"/api/report/"),t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))}}).then(e=>{F(""),E(""),k({user:localStorage.getItem("userTokenid"),discription:"",amount:"",type:"deposite",account:0,cash:0,date:""});let t=e.data.belance;e.data.moneys;l(S.map(e=>e.id===t.id?t:e)),L(R.map(e=>e.id===t.id?t:e)),x(h.map(e=>e.id===t.id?t:e)),d().fire({position:"top-end",icon:"success",title:"Add successfully!",showConfirmButton:!1,timer:600})}).catch(e=>{d().fire({position:"top-end",icon:"error",title:"something went wrong !",showConfirmButton:!1,timer:1500})})}else d().fire({position:"top-end",icon:"error",title:"You must full amount money type and type inputs !",showConfirmButton:!1,timer:1500})},type:"button",className:"btn btn-success w-100 mt-4",children:"ADD"})})]})]})]})}},28931:()=>{},96482:(e,t,a)=>{a.d(t,{A:()=>h});var n=a(89379),o=a(65043),s=a(79722),i=a(85875),r=(a(30064),a(71933)),l=a(26680),d=(a(28931),a(83003)),c=(a(10068),a(76583)),m=a(53226),p=a(97),u=a(70579);function h(e){let{id:t,close:a,account:h,setAccount:f,edit:b,records:x,setRecords:g,inputRef:y,loading:w,setLoading:_}=e;const j=(0,c.N)(),[N,v]=(0,o.useState)(null),[A,S]=(0,o.useState)(null),[C,k]=(0,o.useState)();(0,d.wA)();(0,o.useEffect)(()=>{const e=async(e,t)=>{try{const a=await fetch(e,{mode:"no-cors",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))}});a.ok;const n=await a.blob(),o=e.substring(e.lastIndexOf("/")+1);t(new File([n],o,{lastModified:(new Date).getTime(),type:n.type}))}catch(e){}};h.profile_picture&&"string"==typeof h.profile_picture&&e(h.profile_picture,v),h.national_id_picture&&"string"==typeof h.national_id_picture&&e(h.national_id_picture,S)},[h.profile_picture,h.national_id_picture]);const[z,F]=(0,o.useState)(null),[D,I]=(0,o.useState)(null),W=e=>{const t=e.target.files[0],a=new FileReader;a.onload=()=>{"profile_picture"===e.target.name?(F(t),f(e=>(0,n.A)((0,n.A)({},e),{},{profile_picture:a.result}))):"national_id_picture"===e.target.name&&(I(t),f(e=>(0,n.A)((0,n.A)({},e),{},{national_id_picture:a.result})))},a.readAsDataURL(t)},T=e=>{f((0,n.A)((0,n.A)({},h),{},{[e.target.name]:e.target.value}))},B=(0,o.useRef)(null),R=e=>{"Enter"===e.key&&(e.preventDefault(),B.current&&b&&B.current.click())},{formatMessage:L}=(0,p.A)();return(0,u.jsxs)("div",{className:"container rounded-5 customer popup ".concat(b?"show":""),style:{overflowX:"auto",overflowY:"auto",backgroundColor:"#f8f9fa",padding:"10px"},children:[(0,u.jsx)("div",{className:"d-flex justify-content-end",children:(0,u.jsx)("button",{type:"button",className:"btn-close align-self-end p-2 h-25 m-1 mt-0 hover_btn",onClick:a,"aria-label":"Close",style:{fontSize:"0.5rem"}})}),(0,u.jsx)("div",{className:"h-50 rounded-5",style:{transition:"all",transitionDuration:1e3},children:(0,u.jsxs)("div",{className:"row",style:{flexWrap:"wrap",margin:0},children:[(0,u.jsx)("h1",{className:"text-center rounded text-light",style:{backgroundColor:"var(--bs-info)",width:"100%",fontSize:"1rem",height:"1rem",padding:"1.5rem"},children:(0,u.jsx)(m.A,{id:"Edit Account"})}),(0,u.jsxs)("div",{className:"col-12 col-md-4 d-flex flex-column align-items-center",style:{maxWidth:"100%",padding:"0 10px"},children:[(0,u.jsx)("div",{children:(0,u.jsx)("img",{className:"td_img rounded",src:h.profile_picture||r,style:{height:"100px",width:"100px",objectFit:"cover"},alt:"Profile"})}),(0,u.jsxs)("div",{className:"col-12 mt-1 mb-3",style:{maxWidth:"100%",padding:"0 10px"},children:[(0,u.jsx)("label",{htmlFor:"profile_picture",style:{fontWeight:"bold",fontSize:"0.8rem"},children:(0,u.jsx)(m.A,{id:"ProFile Picture"})}),(0,u.jsx)("input",{type:"file",accept:"image/jpeg",name:"profile_picture",onChange:e=>{W(e)},className:"form-control",style:{width:"100%",fontSize:"0.7rem",padding:"0.2rem"}})]}),(0,u.jsx)("div",{children:(0,u.jsx)("img",{className:"td_img rounded",src:h.national_id_picture||l,style:{height:"100px",width:"100px",objectFit:"cover"},alt:"National ID"})}),(0,u.jsxs)("div",{className:"col-12 mt-1",style:{maxWidth:"100%",padding:"0 10px"},children:[(0,u.jsx)("label",{htmlFor:"national_id_picture",style:{fontWeight:"bold",fontSize:"0.8rem"},children:(0,u.jsx)(m.A,{id:"National Id Picture"})}),(0,u.jsx)("input",{type:"file",accept:"image/*",name:"national_id_picture",onChange:e=>{W(e)},className:"form-control",style:{width:"100%",fontSize:"0.7rem",padding:"0.2rem"}})]})]}),(0,u.jsxs)("div",{className:"col-12 col-md-4 mt-3",style:{maxWidth:"100%",padding:"0 10px"},children:[(0,u.jsx)("label",{htmlFor:"name",style:{fontWeight:"bold",fontSize:"0.8rem"},children:(0,u.jsx)(m.A,{id:"Name"})}),(0,u.jsx)("input",{onKeyDown:R,ref:y,onChange:T,value:h.name,type:"text",name:"name",placeholder:L({id:"Name"}),className:"form-control mb-2",style:{width:"100%",fontSize:"0.7rem",padding:"0.2rem"}}),(0,u.jsx)("label",{htmlFor:"father_name",style:{fontWeight:"bold",fontSize:"0.8rem"},children:(0,u.jsx)(m.A,{id:"Father Name"})}),(0,u.jsx)("input",{onKeyDown:R,onChange:T,value:h.father_name,type:"text",name:"father_name",placeholder:L({id:"Father Name"}),className:"form-control mb-2",style:{width:"100%",fontSize:"0.7rem",padding:"0.2rem"}}),(0,u.jsx)("label",{htmlFor:"national_id_number",style:{fontWeight:"bold",fontSize:"0.8rem"},children:(0,u.jsx)(m.A,{id:"National Id Number"})}),(0,u.jsx)("input",{onKeyDown:R,onChange:T,value:h.national_id_number,type:"text",name:"national_id_number",placeholder:L({id:"National Id Number"}),className:"form-control mb-2",style:{width:"100%",fontSize:"0.7rem",padding:"0.2rem"}}),(0,u.jsx)("label",{htmlFor:"phone_number",style:{fontWeight:"bold",fontSize:"0.8rem"},children:(0,u.jsx)(m.A,{id:"Phone Number"})}),(0,u.jsx)("input",{onKeyDown:R,onChange:T,value:h.phone_number,type:"text",name:"phone_number",maxLength:17,placeholder:L({id:"Phone Number"}),className:"form-control mb-2",style:{width:"100%",fontSize:"0.7rem",padding:"0.2rem"}})]}),(0,u.jsxs)("div",{className:"col-12 col-md-4 mt-3",style:{maxWidth:"100%",padding:"0 10px"},children:[(0,u.jsx)("label",{htmlFor:"whatsup_number",style:{fontWeight:"bold",fontSize:"0.8rem"},children:(0,u.jsx)(m.A,{id:"Whatsup Number"})}),(0,u.jsx)("input",{onChange:T,onKeyDown:R,value:h.whatsup_number,type:"text",name:"whatsup_number",maxLength:17,placeholder:L({id:"Whatsup Number"}),className:"form-control mb-2",style:{width:"100%",fontSize:"0.7rem",padding:"0.2rem"}}),(0,u.jsx)("label",{htmlFor:"addresss",style:{fontWeight:"bold",fontSize:"0.8rem"},children:(0,u.jsx)(m.A,{id:"Address"})}),(0,u.jsx)("input",{onKeyDown:R,onChange:T,value:h.addresss,type:"text",name:"addresss",placeholder:L({id:"Address"}),className:"form-control mb-2",style:{width:"100%",fontSize:"0.7rem",padding:"0.2rem"}}),(0,u.jsx)("label",{htmlFor:"whatsup_number",style:{fontWeight:"bold",fontSize:"0.8rem"},children:(0,u.jsx)(m.A,{id:"Serial Number"})}),(0,u.jsx)("input",{onKeyDown:R,onChange:T,value:h.serial,type:"text",name:"serial",maxLength:17,placeholder:L({id:"Serial Number"}),className:"form-control mb-2",style:{width:"100%",fontSize:"0.7rem",padding:"0.2rem"}}),(0,u.jsxs)("div",{className:"form-check form-switch p-0 center d-flex ms-3",style:{width:"4rem",height:"1.5rem"},children:[(0,u.jsx)("label",{for:"validationServer01",className:"fw-bold",style:{fontSize:"0.8rem"},children:(0,u.jsx)(m.A,{id:"Whatsup MSG"})}),(0,u.jsx)("input",{className:"form-check-input align-bottom w-50 h-75 mt-2 ms-2 mb-1",type:"checkbox",id:"report",checked:h.whatsup,onChange:e=>{f((0,n.A)((0,n.A)({},h),{},{whatsup:e.target.checked?1:0}))}})]})]}),(0,u.jsxs)("div",{className:"col-12 d-flex flex-column flex-md-row justify-content-center mt-3 mb-1",children:[(0,u.jsx)("button",{type:"button",className:"text-center form-control w-100 w-md-25 btn btn-outline-danger me-1 mb-1 mb-md-0 ms-1",onClick:a,style:{fontSize:"0.7rem",padding:"0.2rem"},children:(0,u.jsx)(m.A,{id:"Cancel"})}),(0,u.jsx)("button",{type:"button",ref:B,className:"text-center form-control w-100 w-md-25 btn btn-outline-success ms-1",onClick:()=>{const e=new FormData;let t={id:h.id,isdelete:0,user:0,name:"",date_created:"",father_name:"",national_id_number:"",phone_number:"",whatsup_number:0,addresss:"",profile_picture:"",national_id_picture:"",user_name:""};if(t.date_created=h.date_created,t.user_name=h.user_name,e.append("_method","PUT"),t.isdelete=0,t.user=h.user,t.national_id_number=h.national_id_number,t.addresss=h.addresss,t.whatsup_number=h.whatsup_number,t.name=h.name,t.father_name=h.father_name,t.phone_number=h.phone_number,e.append("isdelete",0),h.national_id_number&&e.append("national_id_number",h.national_id_number),h.addresss&&e.append("addresss",h.addresss),h.whatsup_number&&e.append("whatsup_number",h.whatsup_number),h.name&&e.append("name",h.name),h.father_name&&e.append("father_name",h.father_name),h.phone_number&&e.append("phone_number",h.phone_number),e.append("whatsup",h.whatsup),h.serial&&e.append("serial",h.serial),z){e.append("profile_picture",z);const a=new FileReader;a.onload=()=>{t.profile_picture=a.result},a.readAsDataURL(z)}if(D){const a=new FileReader;e.append("national_id_picture",D),a.onload=()=>{t.national_id_picture=a.result},a.readAsDataURL(A)}s.A.post(i.A.getAddress()+"/api/customers/"+"".concat(h.id),e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access")),"Content-Type":"multipart/form-data"}}).then(e=>{g(x.map(a=>a.id===t.id?e.data.customer:a)),j({position:"top-end",icon:"success",title:(0,u.jsx)(m.A,{id:"Updated Successfully!"}),showConfirmButton:!1,timer:600}),a()}).catch(e=>{j({position:"top-end",icon:"error",title:(0,u.jsx)(m.A,{id:"Not Updated Successfully!"}),showConfirmButton:!1,timer:1500})})},style:{fontSize:"0.7rem",padding:"0.2rem"},children:(0,u.jsx)(m.A,{id:"Submit"})})]})]})})]})}}}]);
//# sourceMappingURL=754.b029d022.chunk.js.map