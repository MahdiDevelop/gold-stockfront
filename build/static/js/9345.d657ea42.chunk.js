"use strict";(self.webpackChunkdentest=self.webpackChunkdentest||[]).push([[9345],{4293:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(65043),n=(a(5813),a(97739)),r=(a(34348),a(70579));function o(e){let{handle_date:t,settings:a,default_value:o,lebal:i,onKeyDown:l}=e;const[c,d]=(0,s.useState)();return(0,r.jsxs)("div",{className:"col-3 m-2 mt-3",children:[(0,r.jsx)("label",{htmlFor:"",className:"p-0 m-0",children:i}),(0,r.jsx)(n.InputDatePicker,{onKeyDown:l,value:c,onChange:e=>{if(d(e),null!=e){const a={year:e._a[0],month:e._a[1]+1,day:e._a[2]};t(a)}},inputPlaceholder:"Persian"===a[0].date?"تاریخ را وارد کنید":"Enter the date",locale:"Persian"===a[0].date?"fa":"en",colorPrimary:"#0fbcf9",maximumDate:{year:9999,month:12,day:31},minimumDate:{year:1,month:1,day:1}})]})}},16685:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.jalaliToGregorian=t.gregorianToJalali=void 0,t.gregorianToJalali=function(e,t,a){var s,n,r,o,i;return s=33*~~((i=355666+365*e+~~(((o=t>2?e+1:e)+3)/4)-~~((o+99)/100)+~~((o+399)/400)+a+[0,31,59,90,120,151,181,212,243,273,304,334][t-1])/12053)-1595,s+=4*~~((i%=12053)/1461),(i%=1461)>365&&(s+=~~((i-1)/365),i=(i-1)%365),i<186?(n=1+~~(i/31),r=1+i%31):(n=7+~~((i-186)/30),r=1+(i-186)%30),[s,n,r]},t.jalaliToGregorian=function(e,t,a){var s,n,r,o,i;for(n=400*~~((i=365*(e+=1595)-355668+8*~~(e/33)+~~((e%33+3)/4)+a+(t<7?31*(t-1):30*(t-7)+186))/146097),(i%=146097)>36524&&(n+=100*~~(--i/36524),(i%=36524)>=365&&i++),n+=4*~~(i/1461),(i%=1461)>365&&(n+=~~((i-1)/365),i=(i-1)%365),o=i+1,s=[0,31,n%4==0&&n%100!=0||n%400==0?29:28,31,30,31,30,31,31,30,31,30,31],r=0;r<13&&o>s[parseInt(r,10)];r++)o-=s[parseInt(r,10)];return[n,r,o]}},24582:(e,t,a)=>{e.exports=a.p+"static/media/recover.b78aa6ddf91227c7499a.png"},61238:(e,t,a)=>{a.d(t,{A:()=>u});var s=a(89379),n=a(65043),r=a(21443),o=a(92382),i=a(97),l=a(53226),c=a(70579);const d=e=>{let{isDisabled:t=!1,options:a=[],selectedOption:d,setSelectedOption:u,width:g="100%"}=e;const{formatMessage:m,locale:p}=(0,i.A)(),x="fa"===p,h={name:(0,c.jsx)(l.A,{id:"All Users"}),id:0},f=[h,...a];(0,n.useEffect)(()=>{d||u(h)},[d,u,h]);const A={control:(e,t)=>(0,s.A)((0,s.A)({},e),{},{fontFamily:"en"!==localStorage.getItem("language")&&"'CustomFont1', sans-serif",backgroundColor:"#fff",zIndex:1,borderRadius:"8px",border:t.isFocused?"2px solid #4f46e5":"1px solid #d1d5db",boxShadow:t.isFocused?"0 0 5px rgba(79, 70, 229, 0.5)":"none","&:hover":{border:"1px solid #4f46e5"},minHeight:"39px",padding:"4px 8px",textAlign:x?"right":"left",direction:x?"rtl":"ltr"}),menu:e=>(0,s.A)((0,s.A)({},e),{},{fontFamily:"en"!==localStorage.getItem("language")&&"'CustomFont1', sans-serif",borderRadius:"8px",boxShadow:"0px 4px 10px rgba(0, 0, 0, 0.1)",overflow:"hidden",textAlign:x?"right":"left",direction:x?"rtl":"ltr"}),option:(e,t)=>{let{isFocused:a,isSelected:n}=t;return(0,s.A)((0,s.A)({},e),{},{fontFamily:"en"!==localStorage.getItem("language")&&"'CustomFont1', sans-serif",backgroundColor:n?"#4f46e5":a?"#e0e7ff":"#fff",color:n?"#fff":"#111827",padding:x?"12px 16px 12px 8px":"12px 8px 12px 16px",cursor:"pointer",fontSize:"14px",textAlign:x?"right":"left","&:active":{backgroundColor:"#4338ca"}})},singleValue:e=>(0,s.A)((0,s.A)({},e),{},{fontFamily:"en"!==localStorage.getItem("language")&&"'CustomFont1', sans-serif",fontWeight:"bold",color:"#4f46e5",fontSize:"14px",textAlign:x?"right":"left",direction:x?"rtl":"ltr"}),placeholder:e=>(0,s.A)((0,s.A)({},e),{},{fontFamily:"en"!==localStorage.getItem("language")&&"'CustomFont1', sans-serif",fontSize:"14px",color:"#6b7280",textAlign:x?"right":"left",direction:x?"rtl":"ltr"}),dropdownIndicator:e=>(0,s.A)((0,s.A)({},e),{},{fontFamily:"en"!==localStorage.getItem("language")&&"'CustomFont1', sans-serif",padding:"8px"}),menuPortal:e=>(0,s.A)((0,s.A)({},e),{},{zIndex:1e4}),input:e=>(0,s.A)((0,s.A)({},e),{},{fontFamily:"en"!==localStorage.getItem("language")&&"'CustomFont1', sans-serif",textAlign:x?"right":"left"})};return(0,c.jsx)("div",{className:"mt-3",style:{width:g},dir:x?"rtl":"ltr",children:(0,c.jsx)(r.Ay,{classNamePrefix:"custom-select",value:d,onChange:e=>{u(e)},options:f,getOptionLabel:e=>e.name,getOptionValue:e=>e.id,placeholder:m({id:"select.placeholder"})||(x?"انتخاب کنید...":"Select..."),isClearable:!1,isSearchable:!1,isDisabled:t,menuPortalTarget:document.body,styles:A,components:{DropdownIndicator:e=>{let{innerProps:t}=e;return(0,c.jsx)("div",(0,s.A)((0,s.A)({},t),{},{className:x?"pl-2 text-gray-500":"pr-2 text-gray-500",children:(0,c.jsx)(o.A,{size:20})}))},ClearIndicator:null}})})};d.defaultProps={isDisabled:!1,options:[],selectedOption:null,width:"100%"};const u=d},66958:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var s=a(89379),n=a(65043),r=(a(4293),a(58786)),o=a(79722),i=a(76583),l=a(96482),c=a(25565),d=a(13869),u=(a(83601),a(85875)),g=a(30064),m=a.n(g),p=a(24582),x=a(30232),h=a(55191),f=a.n(h),A=a(61238),S=a(90096),y=a(83003),b=a(10506),j=a.n(b),w=a(97),C=a(53226),v=(a(66885),a(70579));const D=e=>null==e?void 0:e.toLocaleString();function I(e){let{user:t}=e;const a=(0,i.N)(),[g,h]=(0,n.useState)(""),[b,I]=(0,n.useState)(""),[M,B]=(0,n.useState)(""),{settings:F,statuss:k}=(0,y.d4)(e=>e.settings),[N,P]=(0,n.useState)(),{users:T,statusu:_}=(0,y.d4)(e=>e.users),[z,Y]=(0,n.useState)(),[O,R]=(0,n.useState)(),[W,E]=(0,n.useState)(),[H,G]=(0,n.useState)([]),[J,K]=(0,n.useState)([]),[L,V]=(0,n.useState)([]);let U=[];const[q,Q]=(0,n.useState)(0),[X,Z]=(0,n.useState)(!1),[$,ee]=(0,n.useState)(1),[te,ae]=(0,n.useState)(10);(0,n.useEffect)(()=>{(async(e,t)=>{Z(!0);try{const a=await o.A.get(u.A.getAddress()+"/api/report",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))},params:{user_id:N.id,page:e,perPage:t,delete:0,StartDate:b&&O,EndDate:M&&W,search:null!=z&&z.length?z:"false",type:"all"}});le(a.data.data),V(a.data.data),Q(a.data.total),Z(!1)}catch(e){Z(!1)}})($,te)},[$,te,M,b,N,z]);const[se,ne]=(0,n.useState)(0),[re,oe]=(0,n.useState)({name:"",cach:0}),[ie,le]=(0,n.useState)([]),[ce,de]=(0,n.useState)(!1),[ue,ge]=(0,n.useState)(!1),[me,pe]=(0,n.useState)(null),[xe,he]=(0,n.useState)(""),[fe,Ae]=(0,n.useState)(0),[Se,ye]=(0,n.useState)(!1),[be,je]=(0,n.useState)(!1),[we,Ce]=(0,n.useState)(!1),ve=(0,w.A)(),[De,Ie]=(0,n.useState)({account:0,type:0,belance:0,date_created:""}),[Me,Be]=(0,n.useState)({description:"",amount:0,date:null,account:0,type:"withdraw",cash:0}),[Fe,ke]=((0,n.useMemo)(()=>{if("0"===De.belance)return-parseInt(Me.amount);{let e=parseInt(De.belance);return e-=parseInt(Me.amount),e}}),(0,n.useMemo)(()=>{const e=U.find(e=>e.id===se);if(e){let t=parseInt(Me.amount),a=parseInt(e.cach)-t;return Be((0,s.A)((0,s.A)({},Me),{},{cash:a})),{name:e.name,cash:a}}return{name:"",cash:0}},[H,se,Me.amount]),(0,n.useState)({discription:"",amount:0,date:"",account:0})),Ne=((0,n.useMemo)(e=>window.innerWidth>768),[{name:(0,v.jsx)("strong",{children:(0,v.jsx)(C.A,{id:"ID"})}),selector:e=>e.id},{name:(0,v.jsx)("strong",{children:(0,v.jsx)(C.A,{id:"Customer Name"})}),selector:e=>e.customer,style:{padding:"0px 20px",justifyContent:"left",textAlign:"center"}},{name:(0,v.jsx)("strong",{children:(0,v.jsx)(C.A,{id:"Transactions"})}),selector:e=>{return t=e.type,(0,v.jsx)("p",{className:"text-capitalize position-static p-2 mb-0 ".concat("deposite"===t?"bg-success":"withdraw"===t?"bg-danger":"bg-primary"," rounded text-light text-center "),style:{width:"75px"},children:t});var t}},{name:(0,v.jsx)("strong",{style:{minWidth:"170px",maxWidth:"200px",width:"200px"},children:(0,v.jsx)(C.A,{id:"Date Created"})}),selector:e=>(e=>{const t=new Date(e);let a="".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"),"-").concat(String(t.getDate()).padStart(2,"0"));const s=t.getHours(),n=t.getMinutes();let r=s>=12?"pm":"am";const o=s%12||12,i=n<10?"0"+n:n;return"Persian"===F[0].date?(f().locale("fa"),r=s>=12?"ب.ظ":"ق.ظ",a=f()(e).format("jYYYY-jMM-jDD")):f().locale("en"),"".concat(a," ").concat(o,":").concat(i," ").concat(r)})(e.date),style:{minWidth:"170px",maxWidth:"200px"}},{name:(0,v.jsxs)("strong",{children:["          ",(0,v.jsx)(C.A,{id:"Currency"})]}),selector:e=>e.moneyType},{name:(0,v.jsxs)("strong",{children:["          ",(0,v.jsx)(C.A,{id:"Amount"})]}),selector:e=>D(e.amount)},{name:(0,v.jsxs)("strong",{children:["          ",(0,v.jsx)(C.A,{id:"Description"})]}),selector:e=>e.discription},{name:(0,v.jsxs)("strong",{children:["          ",(0,v.jsx)(C.A,{id:"Added By"})]}),selector:e=>e.user_name},{name:(0,v.jsx)("strong",{style:{textAlign:"center",backgroundColor:"tranceparent",width:"100%"},children:(0,v.jsx)(C.A,{id:"Restore"})}),selector:e=>(0,v.jsxs)("button",{onClick:()=>{(async e=>{const t=m().mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1}),s=await t.fire({title:ve.formatMessage({id:"Are you sure?"}),text:ve.formatMessage({id:"You won't be able to revert this!"}),icon:"warning",showCancelButton:!0,confirmButtonText:ve.formatMessage({id:"Yes, restore it!"}),cancelButtonText:ve.formatMessage({id:"No, cancel!"}),reverseButtons:!0});if(e._method="put",s.isConfirmed)try{await o.A.post(u.A.getAddress()+"/api/report/".concat(e.id),e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))},params:{type:"restore"}}),le(t=>t.filter(t=>t.id!==e.id)),a({position:"center",icon:"success",title:(0,v.jsx)(C.A,{id:"Restored successfully!"}),showConfirmButton:!1,timer:600})}catch(e){t.fire({title:"Error",title:ve.formatMessage({id:"Something went wrong!"}),icon:"error"})}else s.dismiss===m().DismissReason.cancel&&t.fire({title:"Cancelled",title:ve.formatMessage({id:"Cancelled"}),text:ve.formatMessage({id:"Your record is safe :)"}),icon:"error"})})(e)},style:{border:"none",backgroundColor:"transparent",height:"100%"},children:[e.cach,(0,v.jsx)("img",{height:"30%",width:"30%",src:p,style:{backgroundColor:"tranceparent"}})]})},{name:(0,v.jsx)("strong",{style:{textAlign:"center",backgroundColor:"tranceparent",width:"100%"},children:(0,v.jsx)(C.A,{id:"Delete"})}),selector:e=>(0,v.jsx)("button",{onClick:()=>{(async e=>{const t=m().mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1}),s=await t.fire({title:ve.formatMessage({id:"Are you sure?"}),text:ve.formatMessage({id:"You won't be able to revert this!"}),icon:"warning",showCancelButton:!0,confirmButtonText:ve.formatMessage({id:"Yes, delete it!"}),cancelButtonText:ve.formatMessage({id:"No, cancel!"}),reverseButtons:!0});if(s.isConfirmed)try{const t=localStorage.getItem("access");await o.A.post("".concat(u.A.getAddress(),"/api/report/").concat(e.id),{_method:"delete"},{headers:{Authorization:"Bearer ".concat(t)}}),le(t=>t.filter(t=>t.id!==e.id)),a({position:"top-end",icon:"success",title:(0,v.jsx)(C.A,{id:"record successfully deleted!"}),showConfirmButton:!1,timer:1500})}catch(s){try{const t=localStorage.getItem("refresh"),s=await o.A.post("".concat(u.A.getAddress(),"api/token/refresh/"),{refresh:t});localStorage.setItem("access",s.data.access),await o.A.post("".concat(u.A.getAddress(),"api/report/").concat(e.id,"/"),{_method:"put"},{headers:{Authorization:"Bearer ".concat(s.data.access)}}),a({position:"center",icon:"success",title:(0,v.jsx)(C.A,{id:"record successfully deleted!"}),showConfirmButton:!1,timer:1e3})}catch(e){t.fire({title:"Error",title:(0,v.jsx)(C.A,{id:"Something went wrong!"}),icon:"error"})}}else s.dismiss===m().DismissReason.cancel&&t.fire({title:"Cancelled",text:(0,v.jsx)(C.A,{id:"Your record is safe :)"}),icon:"error"})})(e)},style:{border:"none",backgroundColor:"transparent",height:"100%"},children:(0,v.jsx)("img",{height:"22%",width:"22%",src:x,style:{backgroundColor:"tranceparent"}})})}]),[Pe,Te]=(0,n.useState)(window.innerWidth>768),_e=(0,n.useMemo)(()=>{let e;return e="pa"===localStorage.getItem("language")||"da"===localStorage.getItem("language")?[...Ne]:Ne,e},[Pe]),[ze,Ye]=(0,n.useState)(""),{formatMessage:Oe}=((0,n.useRef)(null),(0,w.A)()),Re={pagination:{rowsPerPage:(0,v.jsx)(C.A,{id:"AddrowsPerPage"}),previous:(0,v.jsx)(C.A,{id:"previous"}),next:(0,v.jsx)(C.A,{id:"next"}),page:(0,v.jsx)(C.A,{id:"page"})}};return(0,v.jsxs)("div",{className:"container mt-5",children:[(0,v.jsxs)("div",{dir:"en"===localStorage.getItem("language")?"ltr":"rtl",className:"bg-light d-flex flex-column flex-lg-row justify-content-lg-between align-items-start align-items-lg-center",style:{borderTop:"5px solid #4a5cf2"},children:[(0,v.jsx)("h2",{className:"m-2 fw-bold mb-4",children:(0,v.jsx)(C.A,{id:"Draft Transactions"})}),(0,v.jsxs)("div",{className:"d-flex flex-column flex-lg-row align-items-start align-items-lg-center",children:[(0,v.jsx)("div",{className:"mb-1 mb-lg-0 me-lg-2 mt-1 ",children:(0,v.jsx)(S.A,{default_value:b,handle_date:e=>{if(e){const{year:t,month:a,day:s}=e,n=(j().toGregorian(t,a,s),new Date);String(n.getHours()).padStart(2,"0"),String(n.getMinutes()).padStart(2,"0");const r=new Date,o=new Date(e.year,e.month-1,e.day,r.getHours(),r.getMinutes()).toISOString();R(o)}},lebal:(0,v.jsx)(C.A,{id:"Start"}),setSelectedDay:I,selectedDay:b})}),(0,v.jsx)("div",{className:"mb-1 mt-1 mb-lg-0 me-lg-2",children:(0,v.jsx)(S.A,{default_value:M,handle_date:e=>{if(e){const{year:t,month:a,day:s}=e,n=(j().toGregorian(t,a,s),new Date);String(n.getHours()).padStart(2,"0"),String(n.getMinutes()).padStart(2,"0");const r=new Date,o=new Date(e.year,e.month-1,e.day,r.getHours(),r.getMinutes()).toISOString();E(o)}},lebal:(0,v.jsx)(C.A,{id:"End"}),setSelectedDay:B,selectedDay:M})}),(0,v.jsx)(A.A,{options:T,selectedOption:N,setSelectedOption:P})]}),(0,v.jsx)("input",{className:"form-control m-2 mb-2 mt-4",style:{width:"100%",maxWidth:"200px"},type:"search",onChange:e=>{Y(e.target.value)},value:z,placeholder:Oe({id:"Search"}),"aria-label":"Search"})]}),(0,v.jsx)(r.Ay,{localization:Re,columns:_e,data:ie,onRowClicked:e=>{pe(e),ge(!0)},striped:!0,responsive:!0,highlightOnHover:!0,pagination:!0}),ue&&(0,v.jsx)(l.A,{close:()=>ge(!1),account:me,setAccount:pe}),ce&&(0,v.jsx)(c.A,{close:()=>de(!1),id:xe,accountbelance:me}),be&&(0,v.jsx)(d.A,{close:()=>je(!1)})]})}},83601:(e,t,a)=>{t.dT=void 0;var s=a(16685),n=s.gregorianToJalali;s.jalaliToGregorian,t.dT=function(e,t,a){if("number"!=typeof e){var s=new Date(e),r=s.getFullYear(),o=s.getMonth()+1,i=s.getDate();return n(r,o,i)}return n(e,t,a)}}}]);
//# sourceMappingURL=9345.d657ea42.chunk.js.map