"use strict";(self.webpackChunkdentest=self.webpackChunkdentest||[]).push([[608],{2853:(e,t,i)=>{i.d(t,{A:()=>r});var n=i(89379),s=(i(65043),i(21443)),l=i(97),o=i(83003),a=i(70579);const r=e=>{let{isEditable:t=!1,options:i,Onsearch:r,selectedOption:d,setSelectedOption:c,searchQuery:u,handleInputChange:m}=e;const x={menuPortal:e=>(0,n.A)((0,n.A)({},e),{},{zIndex:1e7})},{formatMessage:h}=(0,l.A)(),{sidebars:A,statusSidebar:p}=(0,o.d4)(e=>e.sidebars);return(0,a.jsx)("div",{className:"w-40",children:(0,a.jsx)(s.Ay,{classNamePrefix:"custom-select",inputValue:u,value:d,onChange:e=>{c(e)},options:i,onInputChange:m,getOptionLabel:e=>{var t,i,n,s;return(0,a.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,a.jsx)("span",{children:"".concat("gold"===A[0].type?(null===(t=e.stock)||void 0===t?void 0:t.name)+" "+(null===(i=e.stock)||void 0===i||null===(n=i.type)||void 0===n?void 0:n.name):null===(s=e.stock)||void 0===s?void 0:s.name," ")})})},getOptionValue:e=>{var t;return"".concat(null===(t=e.stock)||void 0===t?void 0:t.name)},placeholder:h({id:"Search..."}),isClearable:!0,isSearchable:!0,isDisabled:t,menuPortalTarget:document.body,styles:x})})}},21344:(e,t,i)=>{i.d(t,{A:()=>F});var n=i(89379),s=i(65043),l=(i(58786),i(85875)),o=i(79722),a=(i(30064),i(76583)),r=i(90096),d=i(55191),c=i.n(d),u=i(10506),m=i.n(u),x=i(2853),h=(i(344),i(95492),i(30232),i(47295),i(62299),i(71831)),A=i(83003),p=i(91814),j=i(53226),g=i(97),S=i(90035),f=i(26600),y=i(88911),v=i(94496),b=i(17392),w=i(35316),z=i(7353),_=i(12110),I=i(26494),C=i(5146),D=i(51787),W=i(11906),k=i(79650),q=i(71806),P=i(84882),O=i(28076),N=i(10039),B=i(73460),R=i(40614),T=i(71360),M=i(9855),Y=i(89577),H=i(70579);function F(e){var t,i,d,u,F,E,G;let{AddSellModal:Q,close:L,records:V,setRecords:K,moneys:J,shopingcart:U,setshopingcart:$,belance:X,setbelance:Z,setAddBalanceModal:ee,options1:te,setOptions1:ie,SoldRecords:ne,setSoldRecords:se,bill:le,setbill:oe,money:ae,setmoney:re,returnbill:de,setreturnbill:ce,TotalAmount:ue,setTotalAmount:me,PaidAmount:xe,setPaidAmount:he}=e;const Ae=(0,a.N)(),pe=(0,A.wA)(),{settings:je,errors:ge,statuss:Se}=(0,A.d4)(e=>e.settings);(0,s.useEffect)(()=>{Se||0!==(null==je?void 0:je.lenght)||pe((0,p.mt)())},[pe,Se]);const{items:fe,errori:ye}=(0,A.d4)(e=>e.items),[ve,be]=(0,s.useState)(c()()),{sidebars:we}=(0,A.d4)(e=>e.sidebars),[ze,_e]=(0,s.useState)(),[Ie,Ce]=(0,s.useState)(),[De,We]=(0,s.useState)(c()()),[ke,qe]=(0,s.useState)(!1),[Pe,Oe]=(0,s.useState)({id:0,belance:0}),[Ne,Be]=(0,s.useState)([]),[Re,Te]=(0,s.useState)(0),[Me,Ye]=(0,s.useState)({sell:null,item_id:"",qty:null,weight:null,dateInsert:(new Date).toISOString(),rate:null,user_id:localStorage.getItem("userTokenid"),purchase_price:null,description:"",sell_price:null,expiry_date:(new Date).toISOString(),accounts_id:"",money:"",stock:{name:""},e_id:1}),[He,Fe]=(0,s.useState)(0),Ee=e=>{var t;let i=0,n=[];U.forEach(e=>{n.push({sell:e.sell,item_id:e.item_id,qty:parseInt(e.qty),weight:e.weight,dateInsert:e.dateInsert,rate:e.rate,user_id:e.user_id,sell_price:e.sell_price,description:e.description,expiry_date:e.expiry_date,bill_id:"",accounts_id:e.accounts_id})});let s={arr:n,_method:"put"};o.A.post(l.A.getAddress()+"/api/sellreturn/"+de.id,s,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))},params:{Exesting:null!=le&&le.accounts_id?"ok":"no",money:(null==le?void 0:le.money_id)||0,accounts_id:null===(t=le.accounts)||void 0===t?void 0:t.account_id,PaidAmount:xe||0,TotalAmount:ue,CustomerName:le.temp_customer,DateInsert:ve,bill_id:le.id}}).then(t=>{var n;e&&(e=>{const t=new h.default;t.setFontSize(26),t.setFont("helvetica","bold"),t.setTextColor(11,105,255),t.text("Invoice",105,10,null,null,"center"),t.setFontSize(14),t.setFont("helvetica","normal"),t.setTextColor(0,0,0),t.text("".concat(je[0].company_name),105,20,null,null,"center"),t.setFontSize(12),t.text("Seller Name: ".concat(ze?ze.name.toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):"N/A"),105,28,null,null,"center"),t.setFontSize(14),t.setTextColor(11,105,255),t.text("Invoice Number: ".concat(e),5,19),t.setFontSize(12),t.setTextColor(0,0,0);const i=new Date(ve);let n="".concat(i.getFullYear(),"-").concat(String(i.getMonth()+1).padStart(2,"0"),"-").concat(String(i.getDate()).padStart(2,"0"));const s=i.getHours(),o=i.getMinutes();let a=s>=12?"pm":"am";const r=s%12||12,d=o<10?"0"+o:o;"Persian"===localStorage.getItem("date")?(c().locale("fa"),a=s>=12?"pm":"am",n=c()(ve).format("jYYYY/jMM/jDD")):c().locale("en");const u="".concat(n," ").concat(r,":").concat(d," ").concat(a);if(t.text("Date:".concat(u),5,29),t.setDrawColor(0,0,0),t.setLineWidth(.5),t.line(5,35,205,35),je[0].company_pic){const e=je[0].company_pic.split("/").pop();t.addImage(l.A.getAddress()+"/api/getImage/"+e,"JPEG",180,5,25,25)}else t.setFontSize(12),t.text("No Company Image Available",150,20);t.autoTable({startY:40,head:[["No","Name","Quantity","Price","Total"]],body:U.map(e=>[e.e_id,e.stock.name,e.qty,e.sell_price+"".concat(Xe?Xe.name:"N/A"),e.sell_price*e.qty+"".concat(Xe?Xe.name:"N/A")]),theme:"grid",headStyles:{fillColor:[11,105,255],textColor:[255,255,255],fontSize:10,fontStyle:"bold"},bodyStyles:{fontSize:10,textColor:[0,0,0],fillColor:[255,255,255]},alternateRowStyles:{fillColor:[245,245,245]}});const m=t.lastAutoTable.finalY||40;t.setFontSize(9),t.setTextColor(0,0,0),t.text("Total Amount: ".concat(ue)+"".concat(Xe?Xe.name:"N/A"),152,m+5),t.text("Paid Amount: ".concat(xe||"0.00")+"".concat(Xe?Xe.name:"N/A"),152,m+10),t.text("Belance: ".concat(Pe.belance)+"".concat(Xe?Xe.name:"N/A"),152,m+15),m+15>144?(t.setDrawColor(0,0,0),t.setLineWidth(.5),t.line(5,278,205,278),t.text("Address: ".concat(je[0].address),10,283),t.text("Phone: ".concat(je[0].phone),80,283),t.text("Email: ".concat(je[0].email),140,283)):(t.setDrawColor(0,0,0),t.setLineWidth(.5),t.line(5,139,205,139),t.setFontSize(12),t.text("Address: ".concat(je[0].address),10,144),t.text("Phone: ".concat(je[0].phone),80,144),t.text("Email: ".concat(je[0].email),140,144));const x=t.output("bloburl"),A=document.createElement("iframe");A.style.display="none",A.src=x,document.body.appendChild(A),A.contentWindow.print()})(t.data.bill.id),t.data.bill.money=ae,t.data.bill.accounts={account:null==le||null===(n=le.accounts)||void 0===n?void 0:n.account},t.data.bill.temp_customer=le.temp_customer,i=t.data.bill.id;let s={sells:U,bill:t.data.bill,money:ae};K([s,...V]),be(c()()),_e({name:""}),Ce({name:"",type:{measuring:""}}),We(c()()),Fe(0),Ye({stocks_id:0,qty:0,weight:0,dateInsert:(new Date).toISOString(),rate:0,user_id:localStorage.getItem("userTokenid"),purchase_price:0,description:"Description",sell_price:0,expiry_date:(new Date).toISOString(),accounts_id:""}),Je(""),$e(""),Ze({name:""}),qe(!1),be(c()()),_e(),Ze(),Te(0),Ae({position:"top-end",icon:"success",title:(0,H.jsx)(j.A,{id:"Your record has been added!"}),showConfirmButton:!1,timer:1e3})}).catch(e=>{Ae({position:"top-end",icon:"error",title:(0,H.jsx)(j.A,{id:"You must enter the customer name!"}),showConfirmButton:!1,timer:1e3})})},Ge=e=>{Ye((0,n.A)((0,n.A)({},Me),{},{[e.target.name]:e.target.value}))},[Qe,Le]=(0,s.useState)(),Ve=async e=>{},[Ke,Je]=(0,s.useState)(""),[Ue,$e]=(0,s.useState)(""),[Xe,Ze]=(0,s.useState)({name:""}),et=(0,s.useRef)(null),tt=e=>{"Enter"===e.key&&(e.preventDefault(),et.current&&Q&&et.current.click())};(0,s.useEffect)(()=>{Oe(xe?e=>(0,n.A)((0,n.A)({},e),{},{belance:xe-ue||0}):e=>(0,n.A)((0,n.A)({},e),{},{belance:-ue}))},[xe,ue,U]);const[it,nt]=(0,s.useState)(),[st,lt]=(0,s.useState)();const{formatMessage:ot}=(0,g.A)();return(0,H.jsxs)(S.A,{open:Q,onClose:L,maxWidth:"xl",fullWidth:!0,PaperProps:{sx:{borderRadius:3,height:"85vh",backgroundColor:"#f8f9fa",padding:1,fontSize:"0.8rem",direction:"en"===localStorage.getItem("language")?"ltr":"rtl"}},children:[(0,H.jsx)(f.A,{sx:{p:1},children:(0,H.jsxs)(y.A,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,H.jsx)(v.A,{variant:"h6",sx:{backgroundColor:"info.main",color:"white",width:"100%",textAlign:"center",py:1,borderRadius:1,fontSize:"0.9rem"},children:(0,H.jsx)(j.A,{id:"Return Sell"})}),(0,H.jsx)(b.A,{onClick:L,size:"small",sx:{mt:0},children:(0,H.jsx)(R.A,{size:20})})]})}),(0,H.jsx)(w.A,{sx:{p:1},children:(0,H.jsxs)(y.A,{direction:{xs:"column",md:"row"},spacing:2,children:[(0,H.jsxs)(z.A,{sx:{width:{xs:"100%",md:"66%"}},children:[(0,H.jsx)(_.A,{sx:{mb:2,boxShadow:2},children:(0,H.jsxs)(I.A,{sx:{p:2},children:[(0,H.jsx)(v.A,{variant:"subtitle2",sx:{mb:1,fontSize:"0.85rem"},children:(0,H.jsx)(j.A,{id:"Search Bill"})}),(0,H.jsxs)(y.A,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"flex-end",children:[(0,H.jsx)(C.A,{value:le.id||"",type:"number",label:(0,H.jsx)(j.A,{id:"Bill Number"}),size:"small",fullWidth:!0,sx:{maxWidth:200}}),(0,H.jsx)(C.A,{readOnly:!0,value:(null==le?void 0:le.temp_customer)||(null==le||null===(t=le.accounts)||void 0===t||null===(i=t.account)||void 0===i?void 0:i.name),label:(0,H.jsx)(j.A,{id:"Customer Name"}),size:"small",fullWidth:!0})]})]})}),(0,H.jsx)(_.A,{sx:{mb:2,boxShadow:1},children:(0,H.jsxs)(I.A,{sx:{p:2},children:[(0,H.jsx)(v.A,{variant:"subtitle2",sx:{mb:1,fontSize:"0.85rem"},children:(0,H.jsx)(j.A,{id:"Customer Info"})}),(0,H.jsxs)(y.A,{direction:{xs:"column",sm:"row"},spacing:2,children:[(0,H.jsx)(C.A,{readOnly:!0,value:(null==le?void 0:le.dateInsert)&&(e=>{const t=new Date(e);let i="".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"),"-").concat(String(t.getDate()).padStart(2,"0"));const n=t.getHours(),s=t.getMinutes();let l=n>=12?"pm":"am";const o=n%12||12,a=s<10?"0"+s:s;return"Persian"===je[0].date?(c().locale("fa"),l=n>=12?"ب.ظ":"ق.ظ",i=c()(e).format("jYYYY-jMM-jDD")):c().locale("en"),"".concat(i," ").concat(o,":").concat(a," ").concat(l)})(null==le?void 0:le.dateInsert),label:(0,H.jsx)(j.A,{id:"Date"}),size:"small",fullWidth:!0}),(0,H.jsx)(C.A,{readOnly:!0,value:(null==le?void 0:le.total)&&"".concat(null==le?void 0:le.total," ").concat(null===(d=le.money)||void 0===d?void 0:d.name),label:(0,H.jsx)(j.A,{id:"Total Amount"}),size:"small",fullWidth:!0}),(0,H.jsx)(C.A,{readOnly:!0,value:(null==le?void 0:le.PaidAmount)&&"".concat(null==le?void 0:le.PaidAmount," ").concat(null===(u=le.money)||void 0===u?void 0:u.name),label:(0,H.jsx)(j.A,{id:"Paid Amount"}),size:"small",fullWidth:!0}),(0,H.jsx)(C.A,{readOnly:!0,value:(null==le?void 0:le.Remain)&&"".concat(null==le?void 0:le.Remain," ").concat(null===(F=le.money)||void 0===F?void 0:F.name),label:(0,H.jsx)(j.A,{id:"Remain Amount"}),size:"small",fullWidth:!0})]})]})}),(0,H.jsx)(_.A,{sx:{mb:2,boxShadow:1},children:(0,H.jsxs)(I.A,{sx:{p:2},children:[(0,H.jsx)(v.A,{variant:"subtitle2",sx:{mb:1,fontSize:"0.85rem"},children:(0,H.jsx)(j.A,{id:"Item information"})}),(0,H.jsxs)(z.A,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2,alignItems:"flex-end",flexWrap:"wrap"},children:[(0,H.jsxs)(z.A,{sx:{flex:"2 1 180px",minWidth:180},children:[(0,H.jsx)(v.A,{variant:"body2",fontWeight:"medium",gutterBottom:!0,children:(0,H.jsx)(j.A,{id:"Item Name"})}),(0,H.jsx)(x.A,{searchQuery:Ue,setSearchQuery:$e,handleInputChange:e=>{$e(e),Ve()},handleSearch:Ve,setSelectedOption:e=>{Ce(e),e&&Ye((0,n.A)((0,n.A)({},Me),{},{item_id:e.item_id,stock:e,sell:e.id}))},selectedOption:Ie,options:ne,compactMode:!0,sx:{width:"100%"}})]}),(0,H.jsxs)(z.A,{sx:{flex:"1 1 120px",minWidth:120},children:[(0,H.jsx)(v.A,{variant:"body2",fontWeight:"medium",gutterBottom:!0,children:(0,H.jsx)(j.A,{id:"Quantity"})}),(0,H.jsx)(Y.HG,{customInput:C.A,onKeyDown:tt,onValueChange:e=>{let{value:t}=e;return Ge({target:{name:"qty",value:t}})},value:Me.qty,name:"qty",size:"small",fullWidth:!0,thousandSeparator:!0})]}),(0,H.jsxs)(z.A,{sx:{flex:"1 1 120px",minWidth:120},children:[(0,H.jsx)(v.A,{variant:"body2",fontWeight:"medium",gutterBottom:!0,children:(0,H.jsx)(j.A,{id:"Price"})}),(0,H.jsx)(Y.HG,{customInput:C.A,onKeyDown:tt,onValueChange:e=>{let{value:t}=e;return Ge({target:{name:"sell_price",value:t}})},value:Me.sell_price,name:"sell_price",size:"small",fullWidth:!0,thousandSeparator:!0,InputProps:{startAdornment:(0,H.jsx)(D.A,{position:"start",sx:{color:"text.secondary"},children:"$"})}})]}),"gold"===(null===(E=we[0])||void 0===E?void 0:E.type)&&(0,H.jsxs)(z.A,{sx:{flex:"1 1 120px",minWidth:120},children:[(0,H.jsx)(v.A,{variant:"body2",fontWeight:"medium",gutterBottom:!0,children:(0,H.jsx)(j.A,{id:"weight"})}),(0,H.jsx)(Y.HG,{customInput:C.A,onKeyDown:tt,thousandSeparator:!0,decimalSeparator:".",decimalScale:3,onValueChange:e=>{let{value:t}=e;return Ge({target:{name:"weight",value:t}})},value:Me.weight,name:"weight",size:"small",fullWidth:!0,InputProps:{startAdornment:(0,H.jsx)(D.A,{position:"start",sx:{color:"text.secondary"},children:"g"})}})]}),(0,H.jsxs)(z.A,{sx:{flex:"2 1 200px",minWidth:180},children:[(0,H.jsx)(v.A,{variant:"body2",fontWeight:"medium",gutterBottom:!0,children:(0,H.jsx)(j.A,{id:"Description"})}),(0,H.jsx)(C.A,{name:"description",multiline:!0,minRows:1,size:"small",fullWidth:!0,value:Me.description,onChange:Ge})]}),(0,H.jsx)(W.A,{onClick:()=>{if(!Me.qty)return void Ae({position:"top-end",icon:"error",title:(0,H.jsx)(j.A,{id:"Select an item!"}),showConfirmButton:!1,timer:1e3});const e=Me.qty?parseInt(Me.qty):0,t=Me.weight||1,i=Me.sell_price?parseFloat(Me.sell_price):0;if(parseInt(Ie.qty)-e<0)return void Ae({position:"top-end",icon:"error",title:(0,H.jsx)(j.A,{id:"have not enuagh item!"}),showConfirmButton:!1,timer:1e3});if(!e||!i||!Ie)return void Ae({position:"top-end",icon:"error",title:(0,H.jsx)(j.A,{id:"Please select an item and fill the quantity and price!"}),showConfirmButton:!1,timer:1e3});if(e<=0||i<=0)return void Ae({position:"top-end",icon:"error",title:(0,H.jsx)(j.A,{id:"Quantity and price must be positive values!"}),showConfirmButton:!1,timer:1e3});const s=(0,n.A)((0,n.A)({},Ie),{sell:Me.sell});se(e=>e.map(e=>{if(e.id===Ie.id){const t=parseInt(e.qty,10)-parseInt(Me.qty,10);return(0,n.A)((0,n.A)({},e),{},{qty:t})}return e})),s.qty=Me.qty,$(e=>[...U,s]),he(n=>n+e*i*t),me(n=>n+e*i*t),Ye({stocks_id:"",qty:"",weight:null,dateInsert:(new Date).toISOString(),rate:null,user_id:localStorage.getItem("userTokenid"),purchase_price:"",description:"",sell_price:"",expiry_date:(new Date).toISOString(),accounts_id:"",money:"",stock:{name:""},e_id:Me.e_id+1}),Ce(null)},variant:"contained",color:"primary",size:"small",startIcon:(0,H.jsx)(T.A,{size:16}),sx:{height:40,minWidth:100},children:(0,H.jsx)(j.A,{id:"Add"})})]})]})})]}),(0,H.jsxs)(z.A,{sx:{width:{xs:"100%",md:"33%"}},children:[(0,H.jsx)(_.A,{sx:{mb:2,maxHeight:200,overflow:"auto"},children:(0,H.jsxs)(I.A,{sx:{p:1},children:[(0,H.jsx)(v.A,{variant:"subtitle2",sx:{backgroundColor:"info.main",color:"white",textAlign:"center",py:1,borderRadius:1,fontSize:"0.85rem",mb:1},children:(0,H.jsx)(j.A,{id:"Item Sold"})}),(0,H.jsx)(k.A,{children:(0,H.jsxs)(q.A,{size:"small",stickyHeader:!0,children:[(0,H.jsx)(P.A,{children:(0,H.jsxs)(O.A,{children:[(0,H.jsx)(N.A,{sx:{width:"30%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Name"})}),(0,H.jsx)(N.A,{sx:{width:"20%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Quantity"})}),"gold"===we[0].type&&(0,H.jsx)(N.A,{sx:{width:"10%"},children:(0,H.jsx)(j.A,{id:"weight"})}),(0,H.jsx)(N.A,{sx:{width:"25%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Price"})}),(0,H.jsx)(N.A,{sx:{width:"25%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Description"})})]})}),(0,H.jsx)(B.A,{children:null==ne?void 0:ne.map((e,t)=>(0,H.jsxs)(O.A,{children:[(0,H.jsx)(N.A,{sx:{fontSize:"0.8rem"},children:e.stock.name}),(0,H.jsx)(N.A,{sx:{fontSize:"0.8rem"},children:e.qty}),"gold"===we[0].type&&(0,H.jsx)(N.A,{children:e.weight}),(0,H.jsx)(N.A,{sx:{fontSize:"0.8rem"},children:e.sell_price}),(0,H.jsx)(N.A,{sx:{fontSize:"0.8rem"},children:e.description})]},t))})]})})]})}),(0,H.jsx)(_.A,{sx:{mb:2},children:(0,H.jsxs)(I.A,{sx:{p:2},children:[(0,H.jsx)(Y.HG,{customInput:C.A,value:ue,label:(0,H.jsx)(j.A,{id:"Total Return Amount"}),size:"small",fullWidth:!0,thousandSeparator:!0,readOnly:!0,sx:{mb:2}}),(0,H.jsx)(Y.HG,{customInput:C.A,value:xe,onChange:e=>{he(e.target.value)},label:(0,H.jsx)(j.A,{id:"Paid Return Amount"}),size:"small",fullWidth:!0,thousandSeparator:!0,readOnly:!it,sx:{mb:2}})]})})]})]})}),(0,H.jsx)(z.A,{sx:{p:2},children:(0,H.jsxs)(y.A,{direction:{xs:"column",md:"row"},spacing:2,children:[(0,H.jsx)(z.A,{sx:{width:{xs:"100%",md:"66%"}},children:(0,H.jsx)(_.A,{sx:{maxHeight:300,overflow:"auto"},children:(0,H.jsxs)(I.A,{sx:{p:1},children:[(0,H.jsx)(v.A,{variant:"subtitle2",sx:{backgroundColor:"info.main",color:"white",textAlign:"center",py:1,borderRadius:1,fontSize:"0.85rem",mb:1},children:(0,H.jsx)(j.A,{id:"Return Item Sold"})}),(0,H.jsx)(k.A,{children:(0,H.jsxs)(q.A,{size:"small",stickyHeader:!0,children:[(0,H.jsx)(P.A,{children:(0,H.jsxs)(O.A,{children:[(0,H.jsx)(N.A,{sx:{width:"5%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"No"})}),(0,H.jsx)(N.A,{sx:{width:"20%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Name"})}),(0,H.jsx)(N.A,{sx:{width:"15%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Quantity"})}),"gold"===(null===(G=we[0])||void 0===G?void 0:G.type)&&(0,H.jsx)(N.A,{sx:{width:"10%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"weight"})}),(0,H.jsx)(N.A,{sx:{width:"15%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Price"})}),(0,H.jsx)(N.A,{sx:{width:"15%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Total"})}),(0,H.jsx)(N.A,{sx:{width:"20%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Description"})}),(0,H.jsx)(N.A,{sx:{width:"10%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Delete"})})]})}),(0,H.jsx)(B.A,{children:null==U?void 0:U.map((e,t)=>{var i;return(0,H.jsxs)(O.A,{children:[(0,H.jsx)(N.A,{sx:{fontSize:"0.8rem"},children:e.e_id}),(0,H.jsx)(N.A,{sx:{fontSize:"0.8rem"},children:e.stock.name}),(0,H.jsx)(N.A,{sx:{fontSize:"0.8rem"},children:e.qty}),"gold"===(null===(i=we[0])||void 0===i?void 0:i.type)&&(0,H.jsx)(N.A,{sx:{fontSize:"0.8rem"},children:e.weight}),(0,H.jsx)(N.A,{sx:{fontSize:"0.8rem"},children:e.sell_price}),(0,H.jsx)(N.A,{sx:{fontSize:"0.8rem"},children:e.sell_price*e.qty}),(0,H.jsx)(N.A,{sx:{fontSize:"0.8rem"},children:e.description}),(0,H.jsx)(N.A,{children:(0,H.jsx)(b.A,{size:"small",onClick:()=>{return t=e,se(e=>e.map(e=>e.id===t.sell?(0,n.A)((0,n.A)({},e),{},{qty:e.qty+t.qty}):e)),me(e=>parseInt(e)-parseInt(t.qty*t.sell_price*t.weight)),he(e=>parseInt(e)-parseInt(t.qty*t.sell_price*t.weight)),void $(e=>e.filter(e=>e.id!==t.id));var t},children:(0,H.jsx)(M.A,{size:16})})})]},t)})})]})})]})})}),(0,H.jsx)(z.A,{sx:{width:{xs:"100%",md:"33%"}},children:(0,H.jsx)(_.A,{sx:{mb:2},children:(0,H.jsxs)(I.A,{sx:{p:2},children:[(0,H.jsx)(Y.HG,{customInput:C.A,value:Pe.belance,label:(0,H.jsx)(j.A,{id:"Remain Return Amount"}),size:"small",fullWidth:!0,thousandSeparator:!0,readOnly:!0,sx:{mb:2}}),(0,H.jsx)(r.A,{default_value:De,handle_date:e=>{if(e){const{year:t,month:i,day:s}=e,l=(m().toGregorian(t,i,s),new Date);String(l.getHours()).padStart(2,"0"),String(l.getMinutes()).padStart(2,"0");const o=new Date,a=new Date(e.year,e.month-1,e.day,o.getHours(),o.getMinutes()).toISOString();Ye((0,n.A)((0,n.A)({},Me),{},{dateInsert:a}))}},lebal:(0,H.jsx)(j.A,{id:"Date"}),setSelectedDay:be,selectedDay:ve}),(0,H.jsxs)(y.A,{direction:"row",spacing:1,justifyContent:"center",children:[(0,H.jsx)(W.A,{variant:"contained",color:"error",size:"small",onClick:L,sx:{width:100,fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Cancel"})}),(0,H.jsx)(W.A,{variant:"contained",color:"success",size:"small",onClick:()=>Ee(!1),sx:{width:100,fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Save"})})]})]})})})]})})]})}},34081:(e,t,i)=>{i.d(t,{A:()=>F});var n=i(89379),s=i(65043),l=(i(58786),i(85875)),o=i(79722),a=(i(30064),i(76583)),r=i(90096),d=i(55191),c=i.n(d),u=i(10506),m=i.n(u),x=i(2853),h=(i(344),i(95492),i(30232),i(47295),i(62299),i(71831)),A=i(83003),p=i(91814),j=i(53226),g=i(97),S=i(90035),f=i(26600),y=i(88911),v=i(94496),b=i(17392),w=i(35316),z=i(7353),_=i(12110),I=i(26494),C=i(5146),D=i(11906),W=i(51787),k=i(79650),q=i(71806),P=i(84882),O=i(28076),N=i(10039),B=i(73460),R=i(40614),T=i(71360),M=i(9855),Y=i(89577),H=i(70579);function F(e){var t,i,d,u,F,E,G;let{AddSellModal:Q,close:L,records:V,setRecords:K,moneys:J,belance:U,setbelance:$,setAddBalanceModal:X,options1:Z,setOptions1:ee}=e;const te=(0,a.N)(),ie=(0,A.wA)(),{settings:ne,errors:se,statuss:le}=(0,A.d4)(e=>e.settings);(0,s.useEffect)(()=>{le||0!==(null==ne?void 0:ne.lenght)||ie((0,p.mt)())},[ie,le]);const{items:oe,errori:ae}=(0,A.d4)(e=>e.items),[re,de]=(0,s.useState)(c()()),{sidebars:ce}=(0,A.d4)(e=>e.sidebars),[ue,me]=(0,s.useState)(),[xe,he]=(0,s.useState)(),[Ae,pe]=(0,s.useState)(c()()),[je,ge]=(0,s.useState)(!1),[Se,fe]=(0,s.useState)({id:0,belance:0}),[ye,ve]=(0,s.useState)([]),[be,we]=(0,s.useState)(0),[ze,_e]=(0,s.useState)({sell:null,item_id:"",qty:null,weight:null,dateInsert:(new Date).toISOString(),rate:null,user_id:localStorage.getItem("userTokenid"),purchase_price:null,description:"",sell_price:null,expiry_date:(new Date).toISOString(),accounts_id:"",money:"",stock:{name:""},e_id:1}),[Ie,Ce]=(0,s.useState)([]),[De,We]=(0,s.useState)(0),[ke,qe]=(0,s.useState)(0),Pe=e=>{var t;let i=0;if(Ie.length<=0)return void te({position:"top-end",icon:"error",title:(0,H.jsx)(j.A,{id:"You must fill the item input!"}),showConfirmButton:!1,timer:1e3});let n=[];Ie.forEach(e=>{n.push({sell:e.sell,item_id:e.item_id,qty:e.qty,weight:e.weight,dateInsert:e.dateInsert,rate:e.rate,user_id:e.user_id,sell_price:e.sell_price,description:e.description,expiry_date:e.expiry_date,bill_id:"",accounts_id:e.accounts_id})});let s={arr:n};o.A.post(l.A.getAddress()+"/api/sellreturn",s,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))},params:{bill_prev:Ue,Exesting:null!=et&&et.accounts_id?"ok":"no",money:(null==et?void 0:et.money_id)||0,accounts_id:null===(t=et.accounts)||void 0===t?void 0:t.account_id,PaidAmount:Le||0,TotalAmount:De,CustomerName:et.temp_customer,DateInsert:re,bill_id:et.id}}).then(t=>{var n;e&&(e=>{const t=new h.default;t.setFontSize(26),t.setFont("helvetica","bold"),t.setTextColor(11,105,255),t.text("Invoice",105,10,null,null,"center"),t.setFontSize(14),t.setFont("helvetica","normal"),t.setTextColor(0,0,0),t.text("".concat(ne[0].company_name),105,20,null,null,"center"),t.setFontSize(12),t.text("Seller Name: ".concat(ue?ue.name.toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):"N/A"),105,28,null,null,"center"),t.setFontSize(14),t.setTextColor(11,105,255),t.text("Invoice Number: ".concat(e),5,19),t.setFontSize(12),t.setTextColor(0,0,0);const i=new Date(re);let n="".concat(i.getFullYear(),"-").concat(String(i.getMonth()+1).padStart(2,"0"),"-").concat(String(i.getDate()).padStart(2,"0"));const s=i.getHours(),o=i.getMinutes();let a=s>=12?"pm":"am";const r=s%12||12,d=o<10?"0"+o:o;"Persian"===localStorage.getItem("date")?(c().locale("fa"),a=s>=12?"pm":"am",n=c()(re).format("jYYYY/jMM/jDD")):c().locale("en");const u="".concat(n," ").concat(r,":").concat(d," ").concat(a);if(t.text("Date:".concat(u),5,29),t.setDrawColor(0,0,0),t.setLineWidth(.5),t.line(5,35,205,35),ne[0].company_pic){const e=ne[0].company_pic.split("/").pop();t.addImage(l.A.getAddress()+"/api/getImage/"+e,"JPEG",180,5,25,25)}else t.setFontSize(12),t.text("No Company Image Available",150,20);t.autoTable({startY:40,head:[["No","Name","Quantity","Price","Total"]],body:Ie.map(e=>[e.e_id,e.stock.name,e.qty,e.sell_price+"".concat(Fe?Fe.name:"N/A"),e.sell_price*e.qty+"".concat(Fe?Fe.name:"N/A")]),theme:"grid",headStyles:{fillColor:[11,105,255],textColor:[255,255,255],fontSize:10,fontStyle:"bold"},bodyStyles:{fontSize:10,textColor:[0,0,0],fillColor:[255,255,255]},alternateRowStyles:{fillColor:[245,245,245]}});const m=t.lastAutoTable.finalY||40;t.setFontSize(9),t.setTextColor(0,0,0),t.text("Total Amount: ".concat(De)+"".concat(Fe?Fe.name:"N/A"),152,m+5),t.text("Paid Amount: ".concat(Le||"0.00")+"".concat(Fe?Fe.name:"N/A"),152,m+10),t.text("Belance: ".concat(Se.belance)+"".concat(Fe?Fe.name:"N/A"),152,m+15),m+15>144?(t.setDrawColor(0,0,0),t.setLineWidth(.5),t.line(5,278,205,278),t.text("Address: ".concat(ne[0].address),10,283),t.text("Phone: ".concat(ne[0].phone),80,283),t.text("Email: ".concat(ne[0].email),140,283)):(t.setDrawColor(0,0,0),t.setLineWidth(.5),t.line(5,139,205,139),t.setFontSize(12),t.text("Address: ".concat(ne[0].address),10,144),t.text("Phone: ".concat(ne[0].phone),80,144),t.text("Email: ".concat(ne[0].email),140,144));const x=t.output("bloburl"),A=document.createElement("iframe");A.style.display="none",A.src=x,document.body.appendChild(A),A.contentWindow.print()})(t.data.bill.id),t.data.bill.money=it,t.data.bill.accounts={account:null==et||null===(n=et.accounts)||void 0===n?void 0:n.account},t.data.bill.temp_customer=et.temp_customer,i=t.data.bill.id;let s={sells:Ie,bill:t.data.bill,money:it};K([s,...V]),de(c()()),me({name:""}),he({name:"",type:{measuring:""}}),pe(c()()),qe(0),_e({stocks_id:0,qty:0,weight:0,dateInsert:(new Date).toISOString(),rate:0,user_id:localStorage.getItem("userTokenid"),purchase_price:0,description:"Description",sell_price:0,expiry_date:(new Date).toISOString(),accounts_id:""}),Me(""),He(""),fe({id:0,belance:0}),Ee({name:""}),ge(!1),Ce([]),de(c()()),me(),Ee(),fe({id:0,belance:0}),We(0),Ve(0),we(0),te({position:"top-end",icon:"success",title:(0,H.jsx)(j.A,{id:"Your record has been added!"}),showConfirmButton:!1,timer:1e3})}).catch(e=>{te({position:"top-end",icon:"error",title:(0,H.jsx)(j.A,{id:"You must enter the customer name!"}),showConfirmButton:!1,timer:1e3})})},Oe=e=>{_e((0,n.A)((0,n.A)({},ze),{},{[e.target.name]:e.target.value}))},[Ne,Be]=(0,s.useState)(),Re=async e=>{},[Te,Me]=(0,s.useState)(""),[Ye,He]=(0,s.useState)(""),[Fe,Ee]=(0,s.useState)({name:""}),Ge=(0,s.useRef)(null),Qe=e=>{"Enter"===e.key&&(e.preventDefault(),Ge.current&&Q&&Ge.current.click())},[Le,Ve]=(0,s.useState)(0);(0,s.useEffect)(()=>{fe(Le?e=>(0,n.A)((0,n.A)({},e),{},{belance:Le-De||0}):e=>(0,n.A)((0,n.A)({},e),{},{belance:-De}))},[Le,De,Ie]);const[Ke,Je]=(0,s.useState)(),[Ue,$e]=(0,s.useState)(),[Xe,Ze]=(0,s.useState)([]),[et,tt]=(0,s.useState)({}),[it,nt]=(0,s.useState)(),{formatMessage:st}=(0,g.A)();return(0,H.jsxs)(S.A,{open:Q,onClose:L,maxWidth:"xl",fullWidth:!0,PaperProps:{sx:{borderRadius:3,height:"85vh",backgroundColor:"#f8f9fa",padding:1,fontSize:"0.8rem",direction:"en"===localStorage.getItem("language")?"ltr":"rtl"}},children:[(0,H.jsx)(f.A,{sx:{p:1},children:(0,H.jsxs)(y.A,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,H.jsx)(v.A,{variant:"h6",sx:{backgroundColor:"info.main",color:"white",width:"100%",textAlign:"center",py:1,borderRadius:1,fontSize:"0.9rem"},children:(0,H.jsx)(j.A,{id:"Return Sell"})}),(0,H.jsx)(b.A,{onClick:L,size:"small",sx:{mt:0},children:(0,H.jsx)(R.A,{size:20})})]})}),(0,H.jsx)(w.A,{sx:{p:1},children:(0,H.jsxs)(y.A,{direction:{xs:"column",md:"row"},spacing:2,children:[(0,H.jsxs)(z.A,{sx:{width:{xs:"100%",md:"66%"}},children:[(0,H.jsx)(_.A,{sx:{mb:2,boxShadow:2},children:(0,H.jsxs)(I.A,{sx:{p:2},children:[(0,H.jsx)(v.A,{variant:"subtitle2",sx:{mb:1,fontSize:"0.85rem"},children:(0,H.jsx)(j.A,{id:"Search Bill"})}),(0,H.jsxs)(y.A,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"flex-end",children:[(0,H.jsx)(C.A,{onChange:e=>$e(e.target.value),value:Ue,type:"number",label:(0,H.jsx)(j.A,{id:"Bill Number"}),size:"small",fullWidth:!0,sx:{maxWidth:200}}),(0,H.jsx)(D.A,{onClick:()=>{Ue?o.A.get(l.A.getAddress()+"/api/sell/"+Ue,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))}}).then(e=>{nt(e.data.money),tt(e.data.bill),Ze(e.data.sells)}).catch(()=>{tt([]),Ze([]),te({position:"top-end",icon:"error",title:(0,H.jsx)(j.A,{id:"This bill number not found!"}),showConfirmButton:!1,timer:1e3})}):te({position:"top-end",icon:"error",title:"Please fill the bill number!",showConfirmButton:!1,timer:1e3})},variant:"contained",color:"success",size:"small",sx:{height:40,minWidth:120},children:(0,H.jsx)(j.A,{id:"Find Bill"})}),(0,H.jsx)(C.A,{readOnly:!0,value:(null==et?void 0:et.temp_customer)||(null==et||null===(t=et.accounts)||void 0===t||null===(i=t.account)||void 0===i?void 0:i.name),label:(0,H.jsx)(j.A,{id:"Customer Name"}),size:"small",fullWidth:!0})]})]})}),(0,H.jsx)(_.A,{sx:{mb:2,boxShadow:1},children:(0,H.jsxs)(I.A,{sx:{p:2},children:[(0,H.jsx)(v.A,{variant:"subtitle2",sx:{mb:1,fontSize:"0.85rem"},children:(0,H.jsx)(j.A,{id:"Customer Info"})}),(0,H.jsxs)(y.A,{direction:{xs:"column",sm:"row"},spacing:2,children:[(0,H.jsx)(C.A,{readOnly:!0,value:(null==et?void 0:et.dateInsert)&&(e=>{const t=new Date(e);let i="".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"),"-").concat(String(t.getDate()).padStart(2,"0"));const n=t.getHours(),s=t.getMinutes();let l=n>=12?"pm":"am";const o=n%12||12,a=s<10?"0"+s:s;return"Persian"===localStorage.getItem("date")?(c().locale("fa"),l=n>=12?"ب.ظ":"ق.ظ",i=c()(e).format("jYYYY-jMM-jDD")):c().locale("en"),"".concat(i," ").concat(o,":").concat(a," ").concat(l)})(null==et?void 0:et.dateInsert),label:(0,H.jsx)(j.A,{id:"Date"}),size:"small",fullWidth:!0}),(0,H.jsx)(C.A,{readOnly:!0,value:(null==et?void 0:et.total)&&"".concat(null==et?void 0:et.total," ").concat(null===(d=et.money)||void 0===d?void 0:d.name),label:(0,H.jsx)(j.A,{id:"Total Amount"}),size:"small",fullWidth:!0}),(0,H.jsx)(C.A,{readOnly:!0,value:(null==et?void 0:et.PaidAmount)&&"".concat(null==et?void 0:et.PaidAmount," ").concat(null===(u=et.money)||void 0===u?void 0:u.name),label:(0,H.jsx)(j.A,{id:"Paid Amount"}),size:"small",fullWidth:!0}),(0,H.jsx)(C.A,{readOnly:!0,value:(null==et?void 0:et.Remain)&&"".concat(null==et?void 0:et.Remain," ").concat(null===(F=et.money)||void 0===F?void 0:F.name),label:(0,H.jsx)(j.A,{id:"Remain Amount"}),size:"small",fullWidth:!0})]})]})}),(0,H.jsx)(_.A,{sx:{mb:2,boxShadow:1},children:(0,H.jsxs)(I.A,{sx:{p:2},children:[(0,H.jsx)(v.A,{variant:"subtitle2",sx:{mb:1,fontSize:"0.85rem"},children:(0,H.jsx)(j.A,{id:"Item information"})}),(0,H.jsxs)(z.A,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2,alignItems:"flex-end",flexWrap:"wrap"},children:[(0,H.jsxs)(z.A,{sx:{flex:"2 1 180px",minWidth:180},children:[(0,H.jsx)(v.A,{variant:"body2",fontWeight:"medium",gutterBottom:!0,children:(0,H.jsx)(j.A,{id:"Item Name"})}),(0,H.jsx)(x.A,{searchQuery:Ye,setSearchQuery:He,handleInputChange:e=>{He(e),Re()},handleSearch:Re,setSelectedOption:e=>{he(e),e&&_e((0,n.A)((0,n.A)({},ze),{},{item_id:e.item_id,stock:e,sell:e.id}))},selectedOption:xe,options:Xe,compactMode:!0,sx:{width:"100%"}})]}),(0,H.jsxs)(z.A,{sx:{flex:"1 1 120px",minWidth:120},children:[(0,H.jsx)(v.A,{variant:"body2",fontWeight:"medium",gutterBottom:!0,children:(0,H.jsx)(j.A,{id:"Quantity"})}),(0,H.jsx)(Y.HG,{customInput:C.A,onKeyDown:Qe,onValueChange:e=>{let{value:t}=e;return Oe({target:{name:"qty",value:t}})},value:ze.qty,name:"qty",size:"small",fullWidth:!0,thousandSeparator:!0})]}),(0,H.jsxs)(z.A,{sx:{flex:"1 1 120px",minWidth:120},children:[(0,H.jsx)(v.A,{variant:"body2",fontWeight:"medium",gutterBottom:!0,children:(0,H.jsx)(j.A,{id:"Price"})}),(0,H.jsx)(Y.HG,{customInput:C.A,onKeyDown:Qe,onValueChange:e=>{let{value:t}=e;return Oe({target:{name:"sell_price",value:t}})},value:ze.sell_price,name:"sell_price",size:"small",fullWidth:!0,thousandSeparator:!0,InputProps:{startAdornment:(0,H.jsx)(W.A,{position:"start",sx:{color:"text.secondary"},children:"$"})}})]}),"gold"===(null===(E=ce[0])||void 0===E?void 0:E.type)&&(0,H.jsxs)(z.A,{sx:{flex:"1 1 120px",minWidth:120},children:[(0,H.jsx)(v.A,{variant:"body2",fontWeight:"medium",gutterBottom:!0,children:(0,H.jsx)(j.A,{id:"weight"})}),(0,H.jsx)(Y.HG,{customInput:C.A,onKeyDown:Qe,thousandSeparator:!0,decimalSeparator:".",decimalScale:3,onValueChange:e=>{let{value:t}=e;return Oe({target:{name:"weight",value:t}})},value:ze.weight,name:"weight",size:"small",fullWidth:!0,InputProps:{startAdornment:(0,H.jsx)(W.A,{position:"start",sx:{color:"text.secondary"},children:"g"})}})]}),(0,H.jsxs)(z.A,{sx:{flex:"2 1 200px",minWidth:180},children:[(0,H.jsx)(v.A,{variant:"body2",fontWeight:"medium",gutterBottom:!0,children:(0,H.jsx)(j.A,{id:"Description"})}),(0,H.jsx)(C.A,{name:"description",multiline:!0,minRows:1,size:"small",fullWidth:!0,value:ze.description,onChange:Oe})]}),(0,H.jsx)(D.A,{onClick:()=>{if(!ze.qty)return void te({position:"top-end",icon:"error",title:(0,H.jsx)(j.A,{id:"Select an item!"}),showConfirmButton:!1,timer:1e3});const e=ze.weight||1,t=ze.qty?parseInt(ze.qty):0,i=ze.sell_price?parseFloat(ze.sell_price):0;if(parseInt(xe.qty)-t<0)return void te({position:"top-end",icon:"error",title:(0,H.jsx)(j.A,{id:"have not enuagh item!"}),showConfirmButton:!1,timer:1e3});if(!t||!i||!xe)return void te({position:"top-end",icon:"error",title:(0,H.jsx)(j.A,{id:"Please select an item and fill the quantity and price!"}),showConfirmButton:!1,timer:1e3});if(t<=0||i<=0)return void te({position:"top-end",icon:"error",title:(0,H.jsx)(j.A,{id:"Quantity and price must be positive values!"}),showConfirmButton:!1,timer:1e3});const s=(0,n.A)((0,n.A)({},xe),{sell:ze.sell});Ze(e=>e.map(e=>{if(e.id===xe.id){const t=parseInt(e.qty,10)-parseInt(ze.qty,10);return(0,n.A)((0,n.A)({},e),{},{qty:t})}return e})),s.qty=ze.qty,Ce(e=>[...Ie,s]),Ve(n=>n+t*i*e),We(n=>n+t*i*e),_e({stocks_id:"",qty:"",weight:null,dateInsert:(new Date).toISOString(),rate:null,user_id:localStorage.getItem("userTokenid"),purchase_price:"",description:"",sell_price:"",expiry_date:(new Date).toISOString(),accounts_id:"",money:"",stock:{name:""},e_id:ze.e_id+1}),he(null)},variant:"contained",color:"primary",size:"small",startIcon:(0,H.jsx)(T.A,{size:16}),sx:{height:40,minWidth:100},children:(0,H.jsx)(j.A,{id:"Add"})})]})]})})]}),(0,H.jsxs)(z.A,{sx:{width:{xs:"100%",md:"33%"}},children:[(0,H.jsx)(_.A,{sx:{mb:2,maxHeight:200,overflow:"auto"},children:(0,H.jsxs)(I.A,{sx:{p:1},children:[(0,H.jsx)(v.A,{variant:"subtitle2",sx:{backgroundColor:"info.main",color:"white",textAlign:"center",py:1,borderRadius:1,fontSize:"0.85rem",mb:1},children:(0,H.jsx)(j.A,{id:"Item Sold"})}),(0,H.jsx)(k.A,{children:(0,H.jsxs)(q.A,{size:"small",stickyHeader:!0,children:[(0,H.jsx)(P.A,{children:(0,H.jsxs)(O.A,{children:[(0,H.jsx)(N.A,{sx:{width:"30%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Name"})}),(0,H.jsx)(N.A,{sx:{width:"20%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Quantity"})}),"gold"===ce[0].type&&(0,H.jsx)(N.A,{sx:{width:"10%"},children:(0,H.jsx)(j.A,{id:"weight"})}),(0,H.jsx)(N.A,{sx:{width:"25%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Price"})}),(0,H.jsx)(N.A,{sx:{width:"25%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Description"})})]})}),(0,H.jsx)(B.A,{children:null==Xe?void 0:Xe.map((e,t)=>(0,H.jsxs)(O.A,{children:[(0,H.jsx)(N.A,{sx:{fontSize:"0.8rem"},children:e.stock.name}),(0,H.jsx)(N.A,{sx:{fontSize:"0.8rem"},children:e.qty}),"gold"===ce[0].type&&(0,H.jsx)(N.A,{children:e.weight}),(0,H.jsx)(N.A,{sx:{fontSize:"0.8rem"},children:e.sell_price}),(0,H.jsx)(N.A,{sx:{fontSize:"0.8rem"},children:e.description})]},t))})]})})]})}),(0,H.jsx)(_.A,{sx:{mb:2},children:(0,H.jsxs)(I.A,{sx:{p:2},children:[(0,H.jsx)(Y.HG,{customInput:C.A,value:De,label:(0,H.jsx)(j.A,{id:"Total Return Amount"}),size:"small",fullWidth:!0,thousandSeparator:!0,readOnly:!0,sx:{mb:2}}),(0,H.jsx)(Y.HG,{customInput:C.A,value:Le,onChange:e=>{Ve(e.target.value)},label:(0,H.jsx)(j.A,{id:"Paid Return Amount"}),size:"small",fullWidth:!0,thousandSeparator:!0,readOnly:!Ke,sx:{mb:2}})]})})]})]})}),(0,H.jsx)(z.A,{sx:{p:2},children:(0,H.jsxs)(y.A,{direction:{xs:"column",md:"row"},spacing:2,children:[(0,H.jsx)(z.A,{sx:{width:{xs:"100%",md:"66%"}},children:(0,H.jsx)(_.A,{sx:{maxHeight:300,overflow:"auto"},children:(0,H.jsxs)(I.A,{sx:{p:1},children:[(0,H.jsx)(v.A,{variant:"subtitle2",sx:{backgroundColor:"info.main",color:"white",textAlign:"center",py:1,borderRadius:1,fontSize:"0.85rem",mb:1},children:(0,H.jsx)(j.A,{id:"Return Item Sold"})}),(0,H.jsx)(k.A,{children:(0,H.jsxs)(q.A,{size:"small",stickyHeader:!0,children:[(0,H.jsx)(P.A,{children:(0,H.jsxs)(O.A,{children:[(0,H.jsx)(N.A,{sx:{width:"5%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"No"})}),(0,H.jsx)(N.A,{sx:{width:"20%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Name"})}),(0,H.jsx)(N.A,{sx:{width:"15%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Quantity"})}),"gold"===(null===(G=ce[0])||void 0===G?void 0:G.type)&&(0,H.jsx)(N.A,{sx:{width:"10%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"weight"})}),(0,H.jsx)(N.A,{sx:{width:"15%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Price"})}),(0,H.jsx)(N.A,{sx:{width:"15%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Total"})}),(0,H.jsx)(N.A,{sx:{width:"20%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Description"})}),(0,H.jsx)(N.A,{sx:{width:"10%",fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Delete"})})]})}),(0,H.jsx)(B.A,{children:null==Ie?void 0:Ie.map((e,t)=>{var i;return(0,H.jsxs)(O.A,{children:[(0,H.jsx)(N.A,{sx:{fontSize:"0.8rem"},children:e.e_id}),(0,H.jsx)(N.A,{sx:{fontSize:"0.8rem"},children:e.stock.name}),(0,H.jsx)(N.A,{sx:{fontSize:"0.8rem"},children:e.qty}),"gold"===(null===(i=ce[0])||void 0===i?void 0:i.type)&&(0,H.jsx)(N.A,{sx:{fontSize:"0.8rem"},children:e.weight}),(0,H.jsx)(N.A,{sx:{fontSize:"0.8rem"},children:e.sell_price}),(0,H.jsx)(N.A,{sx:{fontSize:"0.8rem"},children:e.sell_price*e.qty}),(0,H.jsx)(N.A,{sx:{fontSize:"0.8rem"},children:e.description}),(0,H.jsx)(N.A,{children:(0,H.jsx)(b.A,{size:"small",onClick:()=>{return t=e,Ze(e=>e.map(e=>e.id===t.sell?(0,n.A)((0,n.A)({},e),{},{qty:parseInt(e.qty)+parseInt(t.qty)}):e)),We(e=>e-t.qty*t.sell_price*t.weight),Ve(e=>e-t.qty*t.sell_price*t.weight),void Ce(e=>e.filter(e=>e.e_id!==t.e_id));var t},children:(0,H.jsx)(M.A,{size:16})})})]},t)})})]})})]})})}),(0,H.jsx)(z.A,{sx:{width:{xs:"100%",md:"33%"}},children:(0,H.jsx)(_.A,{sx:{mb:2},children:(0,H.jsxs)(I.A,{sx:{p:2},children:[(0,H.jsx)(Y.HG,{customInput:C.A,value:Se.belance,label:(0,H.jsx)(j.A,{id:"Remain Return Amount"}),size:"small",fullWidth:!0,thousandSeparator:!0,readOnly:!0,sx:{mb:2}}),(0,H.jsx)(r.A,{default_value:Ae,handle_date:e=>{if(e){const{year:t,month:i,day:s}=e,l=(m().toGregorian(t,i,s),new Date);String(l.getHours()).padStart(2,"0"),String(l.getMinutes()).padStart(2,"0");const o=new Date,a=new Date(e.year,e.month-1,e.day,o.getHours(),o.getMinutes()).toISOString();_e((0,n.A)((0,n.A)({},ze),{},{dateInsert:a}))}},lebal:(0,H.jsx)(j.A,{id:"Date"}),setSelectedDay:de,selectedDay:re}),(0,H.jsxs)(y.A,{direction:"row",spacing:1,justifyContent:"center",children:[(0,H.jsx)(D.A,{variant:"contained",color:"error",size:"small",onClick:L,sx:{width:100,fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Cancel"})}),(0,H.jsx)(D.A,{variant:"contained",color:"success",size:"small",onClick:()=>Pe(!1),sx:{width:100,fontSize:"0.8rem"},children:(0,H.jsx)(j.A,{id:"Save"})})]})]})})})]})})]})}}}]);
//# sourceMappingURL=608.723a4abd.chunk.js.map