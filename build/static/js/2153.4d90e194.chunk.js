"use strict";(self.webpackChunkdentest=self.webpackChunkdentest||[]).push([[2153],{16685:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.jalaliToGregorian=t.gregorianToJalali=void 0,t.gregorianToJalali=function(e,t,a){var s,n,r,o,l;return s=33*~~((l=355666+365*e+~~(((o=t>2?e+1:e)+3)/4)-~~((o+99)/100)+~~((o+399)/400)+a+[0,31,59,90,120,151,181,212,243,273,304,334][t-1])/12053)-1595,s+=4*~~((l%=12053)/1461),(l%=1461)>365&&(s+=~~((l-1)/365),l=(l-1)%365),l<186?(n=1+~~(l/31),r=1+l%31):(n=7+~~((l-186)/30),r=1+(l-186)%30),[s,n,r]},t.jalaliToGregorian=function(e,t,a){var s,n,r,o,l;for(n=400*~~((l=365*(e+=1595)-355668+8*~~(e/33)+~~((e%33+3)/4)+a+(t<7?31*(t-1):30*(t-7)+186))/146097),(l%=146097)>36524&&(n+=100*~~(--l/36524),(l%=36524)>=365&&l++),n+=4*~~(l/1461),(l%=1461)>365&&(n+=~~((l-1)/365),l=(l-1)%365),o=l+1,s=[0,31,n%4==0&&n%100!=0||n%400==0?29:28,31,30,31,30,31,31,30,31,30,31],r=0;r<13&&o>s[parseInt(r,10)];r++)o-=s[parseInt(r,10)];return[n,r,o]}},37094:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var s=a(65043),n=a(58786),r=(a(83601),a(30064)),o=a.n(r),l=a(76583),i=a(30232),d=a(79722),c=a(96482),u=a(10506),g=a.n(u),m=(a(62299),a(25565)),p=a(13869),h=a(85875),f=a(90096),x=a(61238),b=a(71933),A=(a(26680),a(37698),a(83003)),S=(a(10068),a(61682),a(23603),a(91814),a(55191)),y=a.n(S),w=a(53226),j=a(97),_=(a(66885),a(70579));function C(e){let{date1:t,user:a,setting:r,setsettting:u}=e;(0,l.N)(),(0,A.wA)();const S=[{name:"Id",selector:e=>e.id,sortable:!0,style:{width:"1px",minWidth:"1px"}},{name:"Photo",cell:e=>(0,_.jsx)("img",{src:e.hasOwnProperty("profile_picture")&&null!==e.profile_picture?e.profile_picture:b,alt:e.name,style:{width:"50px",height:"50px",borderRadius:"50%"}}),style:{width:"1px",minWidth:"1px"},sortable:!0},{name:"Name",selector:e=>e.name,sortable:!0},{name:"Father Name",selector:e=>e.father_name,sortable:!0},{name:"Date Created",selector:e=>Me(e.date_created)},{name:"Address",selector:e=>e.addresss,sortable:!0},{name:"Phone",selector:e=>e.phone_number,sortable:!0},{name:"Whatsup",selector:e=>e.whatsup_number,sortable:!0},{name:"National Id Number",selector:e=>e.national_id_number,sortable:!0},{name:"Added by ",selector:e=>e.user.name,sortable:!0},{name:(0,_.jsx)("p",{style:{margin:"auto auto",textAlign:"center",backgroundColor:"transparent",width:"100%"},children:"Delete"}),selector:e=>(0,_.jsx)("button",{className:"".concat(e.ontransaction?"d-none":""),onClick:()=>Fe(e),style:{border:"none",backgroundColor:"transparent",height:"100%"},children:(0,_.jsx)("img",{height:"25%",width:"25%",src:i,style:{backgroundColor:"transparent"}})})}],{settings:C,statuss:v}=(0,A.d4)(e=>e.settings),[D,I]=(0,s.useState)(),{users:N,statusu:P}=(0,A.d4)(e=>e.users),[F,M]=(0,s.useState)(),[k,R]=(0,s.useState)(),[O,T]=(0,s.useState)(),[B,z]=(0,s.useState)(),[W,Y]=(0,s.useState)(),[H,E]=(0,s.useState)([]),[G,L]=(0,s.useState)([]),[J,V]=(0,s.useState)([]),[U,q]=(0,s.useState)(),[K,Q]=(0,s.useState)(),[X,Z]=(0,s.useState)(!1),[$,ee]=(0,s.useState)(!1),[te,ae]=(0,s.useState)(null),se=[{name:(0,_.jsx)("p",{style:{margin:"auto auto",textAlign:"center",backgroundColor:"transparent",width:"100%"},children:(0,_.jsx)(w.A,{id:"Delete"})}),selector:e=>(0,_.jsx)("button",{className:"".concat(e.ontransaction?"d-none":""),onClick:()=>Fe(e),style:{border:"none",backgroundColor:"transparent",height:"100%"},children:(0,_.jsx)("img",{height:"25%",width:"25%",src:i,style:{backgroundColor:"transparent"}})})},{name:(0,_.jsx)(w.A,{id:"Add By"}),selector:e=>e.user.name,sortable:!0},{name:(0,_.jsx)(w.A,{id:"National Id Number"}),selector:e=>e.national_id_number,sortable:!0},{name:(0,_.jsx)(w.A,{id:"Whatsup"}),selector:e=>e.whatsup_number,sortable:!0},{name:(0,_.jsx)(w.A,{id:"Phone"}),selector:e=>e.phone_number,sortable:!0},{name:(0,_.jsx)(w.A,{id:"Address"}),selector:e=>e.addresss,sortable:!0},{name:(0,_.jsx)(w.A,{id:"Date Created"}),selector:e=>Me(e.date_created)},{name:(0,_.jsx)(w.A,{id:"Father Name"}),selector:e=>e.father_name,sortable:!0},{name:(0,_.jsx)(w.A,{id:"Name"}),selector:e=>e.name,sortable:!0},{name:(0,_.jsx)(w.A,{id:"Photo"}),cell:e=>(0,_.jsx)("img",{src:e.hasOwnProperty("profile_picture")&&null!==e.profile_picture?e.profile_picture:b,alt:e.name,style:{width:"50px",height:"50px",borderRadius:"50%"}}),style:{width:"1px",minWidth:"1px"},sortable:!0},{name:(0,_.jsx)(w.A,{id:"ID"}),selector:e=>e.id,sortable:!0,style:{width:"1px",minWidth:"1px"}}],[ne,re]=(0,s.useState)({id:0,isdelete:0,user:0,name:"",date_created:"",father_name:"",national_id_number:"",phone_number:"",whatsup_number:0,addresss:"",profile_picture:"",national_id_picture:"",whatsapp:1}),[oe,le]=(0,s.useState)(""),[ie,de]=(0,s.useState)(window.innerWidth>768),[ce,ue]=(0,s.useState)(!1),[ge,me]=(0,s.useState)(0),[pe,he]=(0,s.useState)(!1),[fe,xe]=(0,s.useState)(1),[be,Ae]=(0,s.useState)(10);(0,s.useEffect)(()=>{(async(e,t)=>{he(!0);try{const a=await d.A.get(h.A.getAddress()+"/api/customers",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))},params:{user_id:D.id,page:e,perPage:t,delete:0,StartDate:B&&k,EndDate:W&&O,search:null!=F&&F.length?F:"false"}});q(a.data.data),Q(a.data.data),me(a.data.total),he(!1)}catch(e){he(!1)}})(fe,be)},[fe,be,W,B,D,F]);const[Se,ye]=(0,s.useState)({national_id_picture:"",profile_picture:"",national_id_number:"",isdelete:0,user:"",address:"",whatsup_number:"",name:"",father_name:"",phone_number:""}),[we,je]=(0,s.useState)(),[_e,Ce]=(0,s.useState)(),[ve,De]=(0,s.useState)(),[Ie,Ne]=(0,s.useState)(),Pe=(0,j.A)(),Fe=async e=>{e.profile_picture&&e.profile_picture,e.national_id_picture&&"string"==typeof e.national_id_picture&&(async(e,t)=>{try{const a=await fetch(e),s=await a.blob(),n=e.substring(e.lastIndexOf("/")+1);t(new File([s],n,{lastModified:(new Date).getTime(),type:s.type}))}catch(e){}})(e.national_id_picture,Ne);const t=o().mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1}),a=await t.fire({title:Pe.formatMessage({id:"Are you sure?"}),text:Pe.formatMessage({id:"You won't be able to revert this!"}),icon:"warning",showCancelButton:!0,confirmButtonText:Pe.formatMessage({id:"Yes, delete it!"}),cancelButtonText:Pe.formatMessage({id:"No, cancel!"}),reverseButtons:!0});if(a.isConfirmed){const t=new FormData;t.append("_method","put"),t.append("isdelete",1),d.A.post(h.A.getAddress()+"/api/customers/"+"".concat(e.id),t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))}}).then(t=>{Q(K.filter(t=>t.id!==e.id)),o().fire({position:"top-end",icon:"success",title:Pe.formatMessage({id:"record successfully deleted!"}),showConfirmButton:!1,timer:1e3})}).catch(e=>{o().fire({position:"top-end",icon:"error",title:Pe.formatMessage({id:"Something went wrong!"}),showConfirmButton:!1,timer:1e3})})}else a.dismiss===o().DismissReason.cancel&&t.fire({title:Pe.formatMessage({id:"Cancelled"}),text:Pe.formatMessage({id:"Your record is safe :)"}),icon:"error"})},Me=e=>{const t=y().utc(e);let a="".concat(t.year(),"-").concat(String(t.month()+1).padStart(2,"0"),"-").concat(String(t.date()).padStart(2,"0"));const s=t.hours();t.minutes();let n=s>=12?"pm":"am";return"Persian"===C[0].date?(y().locale("fa"),n=s>=12?"ب.ظ":"ق.ظ",a=y().utc(e).format("jYYYY-jMM-jDD")):y().locale("en"),"".concat(a)},ke=(0,s.useRef)(null),Re=[{name:"Photo",cell:e=>(0,_.jsx)("img",{src:null===e.profile_picture?b:e.profile_picture,alt:e.name,style:{width:"50px",height:"50px",borderRadius:"50%"}}),sortable:!0},{name:"Name",selector:e=>e.name,sortable:!0}],[Oe,Te]=(0,s.useState)(""),Be=(0,s.useRef)(null),ze=(0,s.useRef)(null),{formatMessage:We}=(0,j.A)(),Ye={pagination:{rowsPerPage:(0,_.jsx)(w.A,{id:"rowsPerPage"}),previous:(0,_.jsx)(w.A,{id:"previous"}),next:(0,_.jsx)(w.A,{id:"next"}),page:(0,_.jsx)(w.A,{id:"page"})}},He=(0,s.useMemo)(()=>"pa"===localStorage.getItem("language")||"da"===localStorage.getItem("language")?se.reverse():ie?(localStorage.getItem("userTokenname"),S):Re,[ie]);return(0,_.jsx)("div",{className:"h-100 w-100 ".concat("Persian"===r[0].language&&"iransans"),onClick:e=>{"container mt-5"!=e.target.className&&"main"!=e.target.className&&"h-100 w-100"!=e.target.className||(Z(!1),ee(!1),ue(!1))},children:(0,_.jsxs)("div",{dir:"en"===localStorage.getItem("language")?"ltr":"rtl",className:"container mt-5",style:{height:"100%"},children:[(0,_.jsx)("button",{onClick:()=>{ee(!1),ue(!0),Z(!1),Be.current.select()},type:"submit",className:"btn btn-info mb-1 p-1",style:{width:"100px"},children:(0,_.jsx)(w.A,{id:"Add"})}),(0,_.jsxs)("div",{dir:"en"===localStorage.getItem("language")?"ltr":"rtl",className:"bg-light d-flex flex-column flex-lg-row justify-content-lg-between align-items-start align-items-lg-center",style:{borderTop:"5px solid #4a5cf2"},children:[(0,_.jsx)("h2",{className:"m-2 fw-bold mb-4",children:(0,_.jsx)(w.A,{id:"Customers"})}),(0,_.jsxs)("div",{className:"d-flex flex-column flex-lg-row align-items-start align-items-lg-center",children:[(0,_.jsx)("div",{className:"mb-1 mb-lg-0 me-lg-2 mt-1 ",children:(0,_.jsx)(f.A,{default_value:B,handle_date:e=>{if(e){const{year:t,month:a,day:s}=e,n=(g().toGregorian(t,a,s),new Date);String(n.getHours()).padStart(2,"0"),String(n.getMinutes()).padStart(2,"0");const r=new Date,o=new Date(e.year,e.month-1,e.day,r.getHours(),r.getMinutes()).toISOString();R(o)}else R(null)},lebal:(0,_.jsx)(w.A,{id:"Start"}),setSelectedDay:z,selectedDay:B})}),(0,_.jsx)("div",{className:"mb-1 mt-1 mb-lg-0 me-lg-2",children:(0,_.jsx)(f.A,{default_value:W,handle_date:e=>{if(e){const{year:t,month:a,day:s}=e,n=(g().toGregorian(t,a,s),new Date);String(n.getHours()).padStart(2,"0"),String(n.getMinutes()).padStart(2,"0");const r=new Date,o=new Date(e.year,e.month-1,e.day,r.getHours(),r.getMinutes()).toISOString();T(o)}},lebal:(0,_.jsx)(w.A,{id:"End"}),setSelectedDay:Y,selectedDay:W})}),(0,_.jsx)(x.A,{options:N,selectedOption:D,setSelectedOption:I})]}),(0,_.jsx)("input",{className:"form-control m-2 mb-2 mt-4",style:{width:"100%",maxWidth:"200px"},type:"search",onChange:e=>{M(e.target.value)},value:F,placeholder:We({id:"Search"}),"aria-label":"Search"})]}),(0,_.jsx)(n.Ay,{columns:He,data:K,onRowClicked:e=>{Z(!1),re(e),ee(!0),ze.current.select(),ue(!1)},progressPending:pe,striped:!0,responsive:!0,highlightOnHover:!0,pagination:!0,paginationServer:!0,paginationTotalRows:ge,onChangePage:e=>{xe(e)},onChangeRowsPerPage:async(e,t)=>{Ae(e),xe(t)},localization:Ye}),(0,_.jsx)(c.A,{loading:pe,setLoading:he,inputRef:ze,close:()=>ee(!1),account:ne,setAccount:re,edit:$,records:K,setRecords:Q}),(0,_.jsx)(m.A,{setMoney:E,inputRef:ke,belancem:J,setbelance:V,prof:we,idprof:_e,customer:Se,setcustomer:ye,money:G,setmoney:L,loading:pe,setLoading:he,close:()=>Z(!1),id:oe,accountbelance:te,setEditAccount:ae,openBelance:X,setOpenBelance:Z}),(0,_.jsx)(p.A,{loading:pe,setLoading:he,inputRef:Be,close:()=>ue(!1),addAccountModal:ce,records:K,setRecords:Q})]})})}},61238:(e,t,a)=>{a.d(t,{A:()=>u});var s=a(89379),n=a(65043),r=a(21443),o=a(92382),l=a(97),i=a(53226),d=a(70579);const c=e=>{let{isDisabled:t=!1,options:a=[],selectedOption:c,setSelectedOption:u,width:g="100%"}=e;const{formatMessage:m,locale:p}=(0,l.A)(),h="fa"===p,f={name:(0,d.jsx)(i.A,{id:"All Users"}),id:0},x=[f,...a];(0,n.useEffect)(()=>{c||u(f)},[c,u,f]);const b={control:(e,t)=>(0,s.A)((0,s.A)({},e),{},{fontFamily:"en"!==localStorage.getItem("language")&&"'CustomFont1', sans-serif",backgroundColor:"#fff",zIndex:1,borderRadius:"8px",border:t.isFocused?"2px solid #4f46e5":"1px solid #d1d5db",boxShadow:t.isFocused?"0 0 5px rgba(79, 70, 229, 0.5)":"none","&:hover":{border:"1px solid #4f46e5"},minHeight:"39px",padding:"4px 8px",textAlign:h?"right":"left",direction:h?"rtl":"ltr"}),menu:e=>(0,s.A)((0,s.A)({},e),{},{fontFamily:"en"!==localStorage.getItem("language")&&"'CustomFont1', sans-serif",borderRadius:"8px",boxShadow:"0px 4px 10px rgba(0, 0, 0, 0.1)",overflow:"hidden",textAlign:h?"right":"left",direction:h?"rtl":"ltr"}),option:(e,t)=>{let{isFocused:a,isSelected:n}=t;return(0,s.A)((0,s.A)({},e),{},{fontFamily:"en"!==localStorage.getItem("language")&&"'CustomFont1', sans-serif",backgroundColor:n?"#4f46e5":a?"#e0e7ff":"#fff",color:n?"#fff":"#111827",padding:h?"12px 16px 12px 8px":"12px 8px 12px 16px",cursor:"pointer",fontSize:"14px",textAlign:h?"right":"left","&:active":{backgroundColor:"#4338ca"}})},singleValue:e=>(0,s.A)((0,s.A)({},e),{},{fontFamily:"en"!==localStorage.getItem("language")&&"'CustomFont1', sans-serif",fontWeight:"bold",color:"#4f46e5",fontSize:"14px",textAlign:h?"right":"left",direction:h?"rtl":"ltr"}),placeholder:e=>(0,s.A)((0,s.A)({},e),{},{fontFamily:"en"!==localStorage.getItem("language")&&"'CustomFont1', sans-serif",fontSize:"14px",color:"#6b7280",textAlign:h?"right":"left",direction:h?"rtl":"ltr"}),dropdownIndicator:e=>(0,s.A)((0,s.A)({},e),{},{fontFamily:"en"!==localStorage.getItem("language")&&"'CustomFont1', sans-serif",padding:"8px"}),menuPortal:e=>(0,s.A)((0,s.A)({},e),{},{zIndex:1e4}),input:e=>(0,s.A)((0,s.A)({},e),{},{fontFamily:"en"!==localStorage.getItem("language")&&"'CustomFont1', sans-serif",textAlign:h?"right":"left"})};return(0,d.jsx)("div",{className:"mt-3",style:{width:g},dir:h?"rtl":"ltr",children:(0,d.jsx)(r.Ay,{classNamePrefix:"custom-select",value:c,onChange:e=>{u(e)},options:x,getOptionLabel:e=>e.name,getOptionValue:e=>e.id,placeholder:m({id:"select.placeholder"})||(h?"انتخاب کنید...":"Select..."),isClearable:!1,isSearchable:!1,isDisabled:t,menuPortalTarget:document.body,styles:b,components:{DropdownIndicator:e=>{let{innerProps:t}=e;return(0,d.jsx)("div",(0,s.A)((0,s.A)({},t),{},{className:h?"pl-2 text-gray-500":"pr-2 text-gray-500",children:(0,d.jsx)(o.A,{size:20})}))},ClearIndicator:null}})})};c.defaultProps={isDisabled:!1,options:[],selectedOption:null,width:"100%"};const u=c},83601:(e,t,a)=>{t.dT=void 0;var s=a(16685),n=s.gregorianToJalali;s.jalaliToGregorian,t.dT=function(e,t,a){if("number"!=typeof e){var s=new Date(e),r=s.getFullYear(),o=s.getMonth()+1,l=s.getDate();return n(r,o,l)}return n(e,t,a)}}}]);
//# sourceMappingURL=2153.4d90e194.chunk.js.map