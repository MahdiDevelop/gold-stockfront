"use strict";(self.webpackChunkdentest=self.webpackChunkdentest||[]).push([[7624],{344:(e,t,a)=>{a.d(t,{A:()=>c});var n=a(89379),s=(a(65043),a(16347)),o=a(21443),r=a(97),l=a(70579);const c=e=>{let{isEditable:t=!1,name:a,type:c,options:i,Onsearch:d,selectedOption:u,setAddAccountModal:m,setSelectedOption:p,searchQuery:g,handleInputChange:h}=e;const x={menuPortal:e=>(0,n.A)((0,n.A)({},e),{},{zIndex:9999})},{formatMessage:y}=(0,r.A)();return(0,l.jsx)("div",{className:"w-40",children:(0,l.jsx)(o.Ay,{classNamePrefix:"custom-select",inputValue:g,value:u,onChange:e=>{p(e)},options:i,onInputChange:h,getOptionLabel:e=>(0,l.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,l.jsx)("span",{children:"".concat(e.name," ")})}),getOptionValue:e=>"".concat(e.name),placeholder:y({id:"Search..."}),isClearable:!0,components:{MenuList:e=>(0,l.jsxs)(s.c.MenuList,(0,n.A)((0,n.A)({},e),{},{children:[e.children,c&&(0,l.jsx)("div",{style:{display:"flex",justifyContent:"center",padding:"10px",borderTop:"1px solid #eaeaea",cursor:"pointer",backgroundColor:"#f9f9f9"},onClick:()=>{m(g)},children:(0,l.jsx)("strong",{children:a})})]}))},isSearchable:!0,isDisabled:t,menuPortalTarget:document.body,styles:x})})}},4293:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(65043),s=(a(5813),a(97739)),o=(a(34348),a(70579));function r(e){let{handle_date:t,settings:a,default_value:r,lebal:l,onKeyDown:c}=e;const[i,d]=(0,n.useState)();return(0,o.jsxs)("div",{className:"col-3 m-2 mt-3",children:[(0,o.jsx)("label",{htmlFor:"",className:"p-0 m-0",children:l}),(0,o.jsx)(s.InputDatePicker,{onKeyDown:c,value:i,onChange:e=>{if(d(e),null!=e){const a={year:e._a[0],month:e._a[1]+1,day:e._a[2]};t(a)}},inputPlaceholder:"Persian"===a[0].date?"تاریخ را وارد کنید":"Enter the date",locale:"Persian"===a[0].date?"fa":"en",colorPrimary:"#0fbcf9",maximumDate:{year:9999,month:12,day:31},minimumDate:{year:1,month:1,day:1}})]})}},16685:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.jalaliToGregorian=t.gregorianToJalali=void 0,t.gregorianToJalali=function(e,t,a){var n,s,o,r,l;return n=33*~~((l=355666+365*e+~~(((r=t>2?e+1:e)+3)/4)-~~((r+99)/100)+~~((r+399)/400)+a+[0,31,59,90,120,151,181,212,243,273,304,334][t-1])/12053)-1595,n+=4*~~((l%=12053)/1461),(l%=1461)>365&&(n+=~~((l-1)/365),l=(l-1)%365),l<186?(s=1+~~(l/31),o=1+l%31):(s=7+~~((l-186)/30),o=1+(l-186)%30),[n,s,o]},t.jalaliToGregorian=function(e,t,a){var n,s,o,r,l;for(s=400*~~((l=365*(e+=1595)-355668+8*~~(e/33)+~~((e%33+3)/4)+a+(t<7?31*(t-1):30*(t-7)+186))/146097),(l%=146097)>36524&&(s+=100*~~(--l/36524),(l%=36524)>=365&&l++),s+=4*~~(l/1461),(l%=1461)>365&&(s+=~~((l-1)/365),l=(l-1)%365),r=l+1,n=[0,31,s%4==0&&s%100!=0||s%400==0?29:28,31,30,31,30,31,31,30,31,30,31],o=0;o<13&&r>n[parseInt(o,10)];o++)r-=n[parseInt(o,10)];return[s,o,r]}},25565:(e,t,a)=>{a.d(t,{A:()=>m});var n=a(89379),s=a(65043),o=a(62299),r=a(79722),l=a(85875),c=a(30064),i=a.n(c),d=a(89577),u=(a(24452),a(61682),a(23603),a(10068),a(37698),a(70579));function m(e){let{inputRef:t,belancem:a,setbelance:c,close:m,id:p,accountbelance:g,belance1:h,openBelance:x,setEditAccount:y,moneys:f,money:b,setmoney:A,customer:j,setcustomer:S,idprof:w,prof:v,setMoney:_}=e;const C=g,[N,k]=(0,s.useState)({user:localStorage.getItem("userTokenid"),discription:"",amount:"",type:"deposite",account:0,cash:0,date:""}),[I,D]=(0,s.useState)(""),[T,M]=(0,s.useState)({belance:0,account:1,type:1}),B=e=>{k((0,n.A)((0,n.A)({},N),{},{[e.target.name]:e.target.value,user:parseInt(localStorage.getItem("userTokenid"))}))},[O,F]=(0,s.useState)("");const[P,E]=(0,s.useState)([]),[z,R]=(0,s.useState)({belance:0,account:0,type:0,delete:"False",user:0}),[Y,L]=(0,s.useState)("");return(0,u.jsxs)("div",{className:"container rounded-5 pe-0 ps-0 resB popup ".concat(x?"show":""),children:[(0,u.jsx)("div",{className:"d-flex justify-content-end p-0 m-0",children:(0,u.jsx)("button",{type:"button",className:"btn-close align-self-end p-3 m-1 mt-0 hover_btn",onClick:m,"aria-label":"Close"})}),(0,u.jsxs)("div",{className:" bg-white container mt-0 p-1 pt-0 col-lg-8 rounded-5",style:{width:"94%"},children:[(0,u.jsx)("h1",{className:"text-center rounded m-0 p-4 text-light mt-0",style:{backgroundColor:"var(--bs-info)"},children:"Availability"}),(0,u.jsxs)("div",{className:"balance-container row mt-4 p-4 pb-0 mb-0",children:[g&&g.map(e=>(0,u.jsx)("div",{className:"col-12 col-md-3 mb-3",children:(0,u.jsx)("div",{className:"card border-0",style:{color:"white",backgroundColor:"#5394a1"},children:(0,u.jsxs)("div",{className:"card-body py-4",children:[(0,u.jsx)("h5",{className:"mb-2 fw-bold text-capitalize",children:e.moneyType}),(0,u.jsxs)("p",{className:"mb-2 fw-bold",children:[e.belance," Available"]})]})})},e.id)),(0,u.jsx)("div",{className:"col-12 col-md-3 mb-3",children:(0,u.jsx)("div",{className:"card border-0",style:{color:"white",backgroundColor:"#5394a1"},children:(0,u.jsxs)("div",{className:"btn-group dropdown",style:{color:"white",backgroundColor:"#5394a1"},children:[(0,u.jsxs)("button",{type:"button",onClick:()=>(()=>{if(Array.isArray(b)&&b.length>0){const e=[];b.forEach(t=>{t&&void 0!==t.id&&null!==t.id&&(Array.isArray(g)&&g.length>0&&g.some(e=>e.type_id===t.id)||e.push(t))}),E(e.length>0?e:[])}})(),className:"btn btn-secondary dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",style:{color:"white",backgroundColor:"#5394a1"},children:[(0,u.jsx)("p",{children:"Add Balance"}),(0,u.jsx)("img",{src:o,alt:"Add",style:{height:"40%",width:"20%"}})]}),(0,u.jsx)("ul",{className:"dropdown-menu pe-5",children:P.length>0?P.map(e=>(0,u.jsx)("li",{children:(0,u.jsx)("button",{onClick:()=>{(e=>{let t={id:0,account:1,type:1,user:0,belance:0,delete:"False",moneyType:""};R((0,n.A)((0,n.A)({},z),{},{type:e.id}));const a=new FormData;a.append("isdelete","False"),a.append("user",localStorage.getItem("userTokenid")),a.append("type",e.id),a.append("account",p);const s=new Date;let o={isdelete:0,user_id:localStorage.getItem("userTokenid"),type_id:e.id,account_id:p,belance:"0",date_created:s.toISOString()};r.A.post(l.A.getAddress()+"/api/belance",o,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))}}).then(e=>{t=e.data.belance,y([...g,t]),E(e=>e.filter(e=>e.id!==t.id)),i().fire({position:"top-end",icon:"success",title:"Updated successfully!",showConfirmButton:!1,timer:600})}).catch(e=>{i().fire({position:"top-end",icon:"error",title:"Something went wrong !",showConfirmButton:!1,timer:1500})})})(e)},className:"dropdown-item fw-bold",type:"button",children:e.name})},e.id)):(0,u.jsx)("li",{children:(0,u.jsx)("button",{className:"dropdown-item fw-bold",type:"button",children:"Empty"})})})]})})})]}),(0,u.jsxs)("form",{className:"form-section col-12 w-100 row rounded-3 m-3 pe-5 p-1 bg-transparent pt-0 mt-0 mb-0",children:[(0,u.jsx)("div",{className:"col-12 col-md-4 m-2 mt-3 ps-2 p-0",children:(0,u.jsxs)("div",{className:"form-floating",children:[(0,u.jsx)("textarea",{name:"discription",ref:t,onChange:e=>{B(e)},value:N.discription,className:"form-control h-50 px-5",placeholder:"Leave a comment here",id:"floatingTextarea2"}),(0,u.jsx)("label",{htmlFor:"floatingTextarea2",children:"Description"})]})}),(0,u.jsxs)("div",{className:"col-12 col-md-2 m-2 mb-3 mt-3 p-0 px-3",children:[(0,u.jsx)("label",{for:"price",children:"Amount"}),(0,u.jsx)(d.HG,{thousandSeparator:!0,name:"amount",className:"form-control",value:Y,placeholder:"0",onChange:e=>{let t=new Date;const a={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDay()},{year:s,month:o,day:r}=a,l=(new Date,(new Date).toISOString()),c=e.target.value,i=c.replace(/,/g,"").replace("$","");L(c),k((0,n.A)((0,n.A)({},N),{},{amount:i,date:l}))}})]}),(0,u.jsxs)("div",{className:"col-12 col-md-2 m-2 mt-3 px-3",children:[(0,u.jsx)("label",{htmlFor:"category",children:"Money Type"}),(0,u.jsxs)("select",{name:"type1",id:"category",onChange:e=>{const t=C.filter(t=>t.moneyType===e.target.value);F(t[0].type),D(e.target.value),k((0,n.A)((0,n.A)({},N),{},{account:t[0].id}))},value:I,className:"form-select",children:[(0,u.jsx)("option",{value:"",disabled:!0,children:"Select"}),g&&g.map(e=>(0,u.jsx)("option",{value:e.moneyType,children:e.moneyType},e.id))]})]}),(0,u.jsxs)("div",{className:"col-12 col-md-2 m-2 mt-3 px-3",children:[(0,u.jsx)("label",{htmlFor:"category",children:"Type"}),(0,u.jsxs)("select",{name:"type",id:"category",onChange:B,value:N.type,className:"form-select",children:[(0,u.jsx)("option",{value:"deposite",children:"Deposite"}),(0,u.jsx)("option",{value:"withdraw",children:"Withdraw"})]})]}),(0,u.jsx)("div",{className:"col-12 col-md-1 p-0 mt-3",children:(0,u.jsx)("button",{onClick:()=>{if(0!=N.amount&&null!=N.amount&&""!=N.type&&""!=I){const e=g.filter(e=>e.type===O);if(0===e.length)return void i().fire({position:"top-end",icon:"error",title:"Something went wrong !",showConfirmButton:!1,timer:1500});parseInt(e[0].belance),parseInt(N.amount);new FormData;let t={user_id:localStorage.getItem("userTokenid"),discription:"",amount:"",type:"deposite",account_id:0,isdelete:0,cash:0,date_created:""};t.discription=N.discription,t.amount=N.amount,t.type=N.type,t.account_id=N.account,t.cash=N.cash;let a=new Date;t.date_created=a.toISOString(),r.A.post("".concat(l.A.getAddress(),"/api/report/"),t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))}}).then(e=>{D(""),L(""),k({user:localStorage.getItem("userTokenid"),discription:"",amount:"",type:"deposite",account:0,cash:0,date:""});let t=e.data.belance;e.data.moneys;c(C.map(e=>e.id===t.id?t:e)),E(P.map(e=>e.id===t.id?t:e)),y(g.map(e=>e.id===t.id?t:e)),i().fire({position:"top-end",icon:"success",title:"Add successfully!",showConfirmButton:!1,timer:600})}).catch(e=>{i().fire({position:"top-end",icon:"error",title:"something went wrong !",showConfirmButton:!1,timer:1500})})}else i().fire({position:"top-end",icon:"error",title:"You must full amount money type and type inputs !",showConfirmButton:!1,timer:1500})},type:"button",className:"btn btn-success w-100 mt-4",children:"ADD"})})]})]})]})}},38183:(e,t,a)=>{a.d(t,{A:()=>f});var n=a(89379),s=a(65043),o=a(85875),r=a(79722),l=(a(71933),a(26680),a(344)),c=(a(4293),a(21443)),i=a(10506),d=a.n(i),u=a(90096),m=a(55191),p=a.n(m),g=a(83003),h=(a(10068),a(53226)),x=a(76583),y=a(70579);function f(e){let{setAccounts:t,close:a,addAccountModal:i,records:m,setRecords:f,setAddcustomerModal:b,accounts:A,money:j}=e;const S=(0,x.N)(),{customers:w,errorc:v,statusc:_}=((0,g.wA)(),(0,g.d4)(e=>e.customers)),[C,N]=(0,s.useState)([]),[k,I]=(0,s.useState)({account_id:null,type_id:null,belance:"0",date_created:"",user_id:localStorage.getItem("userTokenid"),isdelete:0}),[D,T]=(0,s.useState)([]),[M,B]=(0,s.useState)(p()()),[O,F]=(0,s.useState)(),[P,E]=(0,s.useState)({id:0,account_id:0,type_id:0,belance:"0",date_created:"",moneyType:"",account_name:"",moneyId:0,user_id:localStorage.getItem("userTokenid"),user_name:localStorage.getItem("userToken"),isdelete:0}),[z,R]=(0,s.useState)({national_id_picture:"",profile_picture:"",national_id_number:"",isdelete:"False",user_id:"",address:"",whatsup_number:"",name:"",father_name:"",phone_number:""}),[Y,L]=(0,s.useState)([]),[H,G]=(0,s.useState)(),[K,V]=(0,s.useState)(),[W,J]=(0,s.useState)(),[Q,U]=(0,s.useState)(""),q=(0,s.useRef)(null),$=e=>{"Enter"===e.key&&(e.preventDefault(),q.current&&P&&q.current.click())};return(0,s.useEffect)(()=>{if(Q){if(!Q||(null==Q?void 0:Q.length)<3)return void N([]);(async()=>{try{const e=(await r.A.get("".concat(o.A.getAddress(),"/api/customers"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))},params:{query:Q,do:"ok"}})).data;N(e)}catch(e){}})()}},[Q]),(0,y.jsxs)("div",{className:"rounded-4 row g-2 popup m-4 mb-0 ".concat(i&&"show"),style:{width:"20rem"},children:[(0,y.jsx)("div",{className:"d-flex justify-content-end m-0 p-0",children:(0,y.jsx)("button",{type:"button",class:"btn-close align-self-end p-3 m-1 mt-0 hover_btn",onClick:()=>{a()},"aria-label":"Close"})}),(0,y.jsx)("h1",{className:"text-center rounded m-0 p-2 w-100 text-light fs-4",style:{backgroundColor:"var(--bs-info)"},children:(0,y.jsx)(h.A,{id:"Add Account"})}),(0,y.jsxs)("div",{class:"col-md-6",children:[(0,y.jsx)("label",{for:"validationServer01",className:"fw-bold",children:(0,y.jsx)(h.A,{id:"Customer Name"})}),(0,y.jsx)(l.A,{name:(0,y.jsx)(h.A,{id:"Add Customer"}),setAddAccountModal:b,type:!0,searchQuery:Q,handleInputChange:e=>{U(e)},setSelectedOption:e=>{F(e),e&&(R(e),I((0,n.A)((0,n.A)({},k),{},{account_id:e.id})),E((0,n.A)((0,n.A)({},P),{},{account_name:e.name,account_id:e.id})),L(e.missing_moneys))},selectedOption:O,options:C}),(0,y.jsx)("div",{class:"valid-feedback",children:"Looks good!"})]}),(0,y.jsxs)("div",{class:"col-md-6",children:[(0,y.jsx)("label",{for:"validationServer02",className:"fw-bold",children:(0,y.jsx)(h.A,{id:"Currency"})}),(0,y.jsx)("div",{className:"w-40",children:(0,y.jsx)(c.Ay,{onKeyDown:$,value:H,onChange:e=>{const t=(new Date).toISOString();if(G(e),e){I((0,n.A)((0,n.A)({},k),{},{user_id:localStorage.getItem("userTokenid"),type_id:e.id,date_created:t}));const a=m.length>0?Math.max(...m.map(e=>e.id))+1:1;E((0,n.A)((0,n.A)({},P),{},{user_id:localStorage.getItem("userTokenid"),type_id:e.id,id:a,belance:"0",date_created:t,moneyType:e.name,user_name:localStorage.getItem("userToken")}))}},options:Y,getOptionLabel:e=>(0,y.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,y.jsx)("span",{children:"".concat(e.name," ")})}),getOptionValue:e=>"".concat(e.name),isClearable:!0,isSearchable:!0,isDisabled:!Y})}),(0,y.jsx)("div",{class:"valid-feedback",children:"Looks good!"})]}),(0,y.jsx)("div",{className:"coll-10",children:(0,y.jsx)(u.A,{onKeyDown:$,default_value:"",handle_date:e=>{if(e){const{year:t,month:a,day:s}=e,o=(d().toGregorian(t,a,s),new Date);String(o.getHours()).padStart(2,"0"),String(o.getMinutes()).padStart(2,"0");const r=new Date(e.year,e.month-1,e.day,o.getHours(),o.getMinutes()).toISOString();I((0,n.A)((0,n.A)({},k),{},{date_created:r})),E((0,n.A)((0,n.A)({},P),{},{date_created:r}))}},lebal:(0,y.jsx)(h.A,{id:"Date"}),setSelectedDay:B,selectedDay:M})}),(0,y.jsxs)("div",{className:"col-10 ms-4 m-10 mt-5 ps-3 d-flex",children:[(0,y.jsx)("a",{className:"text-center form-control btn btn-danger text-light me-1 ms-1",style:{margin:"auto",width:"150px"},onClick:a,children:(0,y.jsx)(h.A,{id:"Cancel"})}),(0,y.jsx)("a",{className:"text-center btn form-control btn-success text-light ms-1",ref:q,style:{margin:"auto",width:"150px"},onClick:()=>{H?r.A.post(o.A.getAddress()+"/api/belance",k,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access")),"Content-Type":"application/json"}}).then(e=>{E(t=>[(0,n.A)((0,n.A)({},t),{},{id:e.data.id})]);let t={national_id_number:z.national_id_number,isdelete:z.isdelete,user:z.user,address:z.address,whatsup_number:z.whatsup_number,name:z.name,father_name:z.father_name,phone_number:z.phone_number,ontransaction:1};r.A.put(o.A.getAddress()+"/api/customers/"+"".concat(z.id,"/"),t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))}}).then(e=>{S({position:"top-end",icon:"success",title:(0,y.jsx)(h.A,{id:"Your record has been added!"}),showConfirmButton:!1,timer:800})}).catch(e=>{S({position:"top-end",icon:"error",title:(0,y.jsx)(h.A,{id:"Not working ,please try again!"}),showConfirmButton:!1,timer:800})}),I({account:null,type:null,belance:"0",date_created:"",user_id:localStorage.getItem("userTokenid"),isdelete:0}),F({name:""}),G(null),L(null),B(p()()),f([P,...m]),a()}).catch(e=>{S({position:"top-end",icon:"error",title:(0,y.jsx)(h.A,{id:"Not working ,please try again!"}),showConfirmButton:!1,timer:800})}):S({position:"top-end",icon:"error",title:(0,y.jsx)(h.A,{id:"You Must fill all inputs!"}),showConfirmButton:!1,timer:1e3})},children:(0,y.jsx)(h.A,{id:"Submit"})})]})]})}},57624:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var n=a(89379),s=a(65043),o=a(58786),r=a(79722),l=(a(62299),a(25565)),c=a(38183),i=a(13869),d=a(30232),u=a(85875),m=a(30064),p=a.n(m),g=a(76583),h=(a(83601),a(83003)),x=(a(61682),a(23603),a(10068),a(60555)),y=a(61238),f=a(90096),b=a(10506),A=a.n(b),j=a(55191),S=a.n(j),w=a(53226),v=a(97),_=(a(66885),a(70579));const C=e=>e.toLocaleString();function N(e){let{user:t}=e;(0,g.N)(),(0,h.wA)();const[a,m]=(0,s.useState)([]),[b,j]=(0,s.useState)([]),{settings:N,statuss:k}=(0,h.d4)(e=>e.settings),[I,D]=(0,s.useState)(),{users:T,statusu:M}=(0,h.d4)(e=>e.users),[B,O]=(0,s.useState)(),[F,P]=(0,s.useState)(),[E,z]=(0,s.useState)(),[R,Y]=(0,s.useState)(),[L,H]=(0,s.useState)(),[G,K]=(0,s.useState)([]),[V,W]=(0,s.useState)([]),[J,Q]=(0,s.useState)(!1),[U,q]=(0,s.useState)(null),[$,X]=(0,s.useState)(""),[Z,ee]=(0,s.useState)(!1),[te,ae]=(0,s.useState)(!1),[ne,se]=(0,s.useState)(!1),[oe,re]=(0,s.useState)({}),[le,ce]=(0,s.useState)(),[ie,de]=(0,s.useState)(null),[ue,me]=(0,s.useState)([]),[pe,ge]=(0,s.useState)(window.innerWidth>768),he=[{name:(0,_.jsx)("strong",{children:"Account ID"}),selector:e=>e.id},{name:(0,_.jsx)("strong",{children:"Customer Name"}),selector:e=>e.account_name},{name:(0,_.jsx)("strong",{children:"Date Created"}),selector:e=>we(e.date_created)},{name:(0,_.jsx)("strong",{children:"Money Type"}),selector:e=>e.moneyType},{name:(0,_.jsx)("strong",{children:"Balance"}),selector:e=>C(e.belance)},{name:(0,_.jsx)("strong",{children:"Added by"}),selector:e=>e.user_name},{name:(0,_.jsx)("strong",{style:{textAlign:"center",backgroundColor:"transparent",width:"100%"},children:"Delete"}),selector:e=>(0,_.jsx)("button",{className:"".concat(1===e.ontransaction?"d-none":""),onClick:()=>Pe(e),style:{border:"none",backgroundColor:"transparent",height:"100%"},children:(0,_.jsx)("img",{height:"15%",width:"15%",src:d,style:{backgroundColor:"transparent"}})})}],xe=[{name:(0,_.jsx)("strong",{style:{textAlign:"center",backgroundColor:"transparent",width:"100%"},children:(0,_.jsx)(w.A,{id:"Delete"})}),selector:e=>(0,_.jsx)("button",{className:"".concat(1===e.ontransaction?"d-none":""),onClick:()=>Pe(e),style:{border:"none",backgroundColor:"transparent",height:"100%"},children:(0,_.jsx)("img",{height:"15%",width:"15%",src:d,style:{backgroundColor:"transparent"}})})},{name:(0,_.jsx)("strong",{children:(0,_.jsx)(w.A,{id:"Added By"})}),selector:e=>e.user_name},{name:(0,_.jsx)("strong",{dir:"",children:(0,_.jsx)(w.A,{id:"Balance"})}),selector:e=>(0,_.jsx)("span",{dir:"ltr",children:C(e.belance)})},{name:(0,_.jsx)("strong",{children:(0,_.jsx)(w.A,{id:"Currency"})}),selector:e=>e.moneyType},{name:(0,_.jsx)("strong",{children:(0,_.jsx)(w.A,{id:"Date Created"})}),selector:e=>we(e.date_created)},{name:(0,_.jsx)("strong",{children:(0,_.jsx)(w.A,{id:"Customer Name"})}),selector:e=>e.account_name},{name:(0,_.jsx)("strong",{children:(0,_.jsx)(w.A,{id:"ID"})}),selector:e=>e.id}],[ye,fe]=(0,s.useState)({account:null,type:null,belance:0,date_created:"",user:null,isdelete:!1}),[be,Ae]=(0,s.useState)({id:0,account:0,type:0,account_name:"",belance:0,date_created:"",moneyType:"",account_name:"",moneyId:0,user:0,user_name:"",isdelete:!1}),[je,Se]=(0,s.useState)({}),we=((0,s.useMemo)(()=>window.innerWidth>768,[]),e=>{const t=S().utc(e);let a="".concat(t.year(),"-").concat(String(t.month()+1).padStart(2,"0"),"-").concat(String(t.date()).padStart(2,"0"));const n=t.hours(),s=t.minutes();let o=n>=12?"pm":"am";const r=n%12||12,l=s<10?"0"+s:s;return"Persian"===N[0].date?(S().locale("fa"),o=n>=12?"ب.ظ":"ق.ظ",a=S().utc(e).format("jYYYY-jMM-jDD")):S().locale("en"),"".concat(a," ").concat(r,":").concat(l," ").concat(o)}),ve=[{name:"account_name",selector:e=>e.account_name,sortable:!0},{name:"Date Created",selector:e=>e.date_created,sortable:!0},{name:"moneyType",selector:e=>e.moneyType,sortable:!0},{name:"Balance",selector:e=>C(e.belance),sortable:!0}],[_e,Ce]=(0,s.useState)(""),[Ne,ke]=(0,s.useState)(0),[Ie,De]=(0,s.useState)(!1),[Te,Me]=(0,s.useState)(1),[Be,Oe]=(0,s.useState)(10);(0,s.useEffect)(()=>{(async(e,t)=>{De(!0);try{const a=await r.A.get(u.A.getAddress()+"/api/belance",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))},params:{user_id:null!=I&&I.id?I.id:1,page:e,perPage:t,isdelete:0,StartDate:R&&F,EndDate:L&&E,search:null!=B&&B.length?B:"false"}});j(a.data.data),K(a.data.data),ke(a.data.total),De(!1)}catch(e){De(!1)}})(Te,Be)},[Te,Be,L,R,I,B]);const Fe=(0,v.A)(),Pe=async e=>{const t=p().mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1}),a=await t.fire({title:Fe.formatMessage({id:"Are you sure?"}),text:Fe.formatMessage({id:"You won't be able to revert this!"}),icon:"warning",showCancelButton:!0,confirmButtonText:Fe.formatMessage({id:"Yes, delete it!"}),cancelButtonText:Fe.formatMessage({id:"No, cancel!"}),reverseButtons:!0});if(a.isConfirmed){let t={isdelete:1,_method:"put"};r.A.post(u.A.getAddress()+"/api/belance/"+"".concat(e.id),t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))}}).then(t=>{p().fire({position:"top-end",icon:"success",title:Fe.formatMessage({id:"record successfully deleted!"}),showConfirmButton:!1,timer:1e3}),K(t=>t.filter(t=>t.id!==e.id))}).catch(e=>{p().fire({position:"top-end",icon:"error",title:Fe.formatMessage({id:"Something went wrong!"}),showConfirmButton:!1,timer:1e3})})}else a.dismiss===p().DismissReason.cancel&&t.fire({title:Fe.formatMessage({id:"Cancelled"}),text:Fe.formatMessage({id:"Your record is safe :)"}),icon:"error"})},[Ee,ze]=(0,s.useState)(!1),Re=(0,s.useRef)(null);(0,s.useEffect)(()=>{Re.current.select()},[Z]);const Ye=()=>{r.A.get(u.A.getAddress()+"/api/money",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))},params:{delete:"False"}}).then(e=>{m(e.data)}).catch(e=>{})},{formatMessage:Le}=(0,v.A)(),He={pagination:{rowsPerPage:(0,_.jsx)(w.A,{id:"AddrowsPerPage"}),previous:(0,_.jsx)(w.A,{id:"previous"}),next:(0,_.jsx)(w.A,{id:"next"}),page:(0,_.jsx)(w.A,{id:"page"})}},Ge=(0,s.useMemo)(()=>"pa"===localStorage.getItem("language")||"da"===localStorage.getItem("language")?xe.reverse():pe?(localStorage.getItem("userTokenname"),he):ve,[pe]);return(0,_.jsx)("div",{className:"w-100 h-100",onClick:e=>{"w-100 h-100"===e.target.className&&ee(!1)},children:(0,_.jsxs)("div",{className:"container mt-5 p-0",dir:"en"===localStorage.getItem("language")?"ltr":"rtl",children:[(0,_.jsx)("button",{onClick:()=>{Ye(),ee(!0)},type:"submit",className:"btn btn-info mb-1 p-1",style:{width:"100px",color:"white"},children:(0,_.jsx)(w.A,{id:"Add"})}),(0,_.jsxs)("div",{dir:"en"===localStorage.getItem("language")?"ltr":"rtl",className:"bg-light d-flex flex-column flex-lg-row justify-content-lg-between align-items-start align-items-lg-center",style:{borderTop:"5px solid #4a5cf2"},children:[(0,_.jsx)("h2",{className:"m-2 fw-bold mb-4",children:(0,_.jsx)(w.A,{id:"Accounts"})}),(0,_.jsxs)("div",{className:"d-flex flex-column flex-lg-row align-items-start align-items-lg-center",children:[(0,_.jsx)("div",{className:"mb-1 mb-lg-0 me-lg-2 mt-1 ",children:(0,_.jsx)(f.A,{default_value:R,handle_date:e=>{if(e){const{year:t,month:a,day:n}=e,s=(A().toGregorian(t,a,n),new Date);String(s.getHours()).padStart(2,"0"),String(s.getMinutes()).padStart(2,"0");const o=new Date,r=new Date(e.year,e.month-1,e.day,o.getHours(),o.getMinutes()).toISOString();P(r)}},lebal:(0,_.jsx)(w.A,{id:"Start"}),setSelectedDay:Y,selectedDay:R})}),(0,_.jsx)("div",{className:"mb-1 mt-1 mb-lg-0 me-lg-2",children:(0,_.jsx)(f.A,{default_value:L,handle_date:e=>{if(e){const{year:t,month:a,day:n}=e,s=(A().toGregorian(t,a,n),new Date);String(s.getHours()).padStart(2,"0"),String(s.getMinutes()).padStart(2,"0");const o=new Date,r=new Date(e.year,e.month-1,e.day,o.getHours(),o.getMinutes()).toISOString();z(r)}},lebal:(0,_.jsx)(w.A,{id:"End"}),setSelectedDay:H,selectedDay:L})}),(0,_.jsx)(y.A,{options:T,selectedOption:I,setSelectedOption:D})]}),(0,_.jsx)("input",{className:"form-control m-2 mb-2 mt-4",style:{width:"100%",maxWidth:"200px"},type:"search",onChange:e=>{O(e.target.value)},value:B,placeholder:Le({id:"Search"}),"aria-label":"Search"})]}),(0,_.jsx)(o.Ay,{columns:Ge,data:G,onRowClicked:e=>{if(!oe[e.id]){Ye(),ce({name:e.account_name,account:e.account}),de({name:e.moneyType,moneyid:e.moneyid}),Se(e),fe((0,n.A)((0,n.A)({},ye),{},{account:e.account,type:e.type,belance:e.belance,date_created:e.date_created,user:e.user,isdelete:e.isdelete})),ae(!0);const t=G.filter(t=>t.account===e.account);let s=[];for(let e=0;e<a.length;e++){t.find(t=>t.type===a[e].id)||s.push(a[e])}s.push({name:e.moneyType,moneyid:e.moneyid}),me(s)}},striped:!0,responsive:!0,progressPending:Ie,highlightOnHover:!0,pagination:!0,paginationServer:!0,paginationTotalRows:Ne,onChangePage:e=>{Me(e)},localization:He}),J&&(0,_.jsx)(l.A,{close:()=>Q(!1),id:$,accountbelance:U}),(0,_.jsx)(c.A,{accounts:b,setAccounts:j,close:()=>ee(!1),addAccountModal:Z,records:G,setRecords:K,money:a,settings:N,setAddcustomerModal:ze}),(0,_.jsx)(x.A,{smoney:ue,setsmeony:me,add:be,setadd:Ae,selectedOption:le,setSelectedOption:ce,nmoney:ie,setnmoney:de,Editefull:je,setEditeFull:Se,bbelance:ye,setbbelance:fe,accounts:b,setAccounts:j,close:()=>ae(!1),addAccountModal:te,records:G,setRecords:K,money:a,settings:N}),(0,_.jsx)(i.A,{inputRef:Re,close:()=>ze(!1),addAccountModal:Ee,records:G,setRecords:K})]})})}},60555:(e,t,a)=>{a.d(t,{A:()=>b});var n=a(89379),s=a(65043),o=a(85875),r=a(79722),l=a(76583),c=a(344),i=(a(4293),a(21443)),d=a(10506),u=a.n(d),m=a(90096),p=a(55191),g=a.n(p),h=a(83003),x=a(10068),y=a(53226),f=a(70579);function b(e){let{selectedOption:t,setSelectedOption:a,nmoney:d,setnmoney:p,Editefull:b,setEditeFull:A,setAccounts:j,close:S,addAccountModal:w,records:v,setRecords:_,accounts:C,money:N,settings:k,bbelance:I,setbbelance:D,smoney:T,setsmeony:M,add:B,setadd:O}=e;const F=(0,h.wA)(),P=(0,l.N)(),{customers:E,errorc:z,statusc:R}=(0,h.d4)(e=>e.customers);(0,s.useEffect)(()=>{R||E||F((0,x.od)())},[F,R,E]);const[Y,L]=(0,s.useState)(g()()),H=(0,s.useRef)(null),G=e=>{"Enter"===e.key&&(e.preventDefault(),H.current&&B&&H.current.click())};return(0,f.jsxs)("div",{className:"rounded-4 row g-2 popup m-4 mb-0 ".concat(w&&"show"),style:{width:"26rem"},children:[(0,f.jsx)("div",{className:"d-flex justify-content-end m-0 p-0",children:(0,f.jsx)("button",{type:"button",class:"btn-close align-self-end p-3 m-1 mt-0 hover_btn",onClick:()=>{S()},"aria-label":"Close"})}),(0,f.jsx)("h1",{className:"text-center rounded m-0 p-2 w-100 text-light fs-4",style:{backgroundColor:"var(--bs-info)"},children:(0,f.jsx)(y.A,{id:"Edit Account"})}),(0,f.jsxs)("div",{class:"col-md-6",children:[(0,f.jsx)("label",{for:"validationServer01",class:"",children:(0,f.jsx)(y.A,{id:"Customer Name"})}),(0,f.jsx)(c.A,{setSelectedOption:a,selectedOption:t,options:E,Onsearch:e=>{if(p(""),e){D((0,n.A)((0,n.A)({},I),{},{account:e.id})),O((0,n.A)((0,n.A)({},B),{},{account_name:e.name,account:e.id}));const t=v.filter(t=>t.account===e.id);let a=[];for(let e=0;e<N.length;e++){t.find(t=>t.type===N[e].id)||a.push(N[e])}M(a)}}}),(0,f.jsx)("div",{class:"valid-feedback",children:"Looks good!"})]}),(0,f.jsxs)("div",{class:"col-md-6",children:[(0,f.jsx)("label",{for:"validationServer02",class:"",children:(0,f.jsx)(y.A,{id:"Currency"})}),(0,f.jsx)("div",{className:"w-40",children:(0,f.jsx)(i.Ay,{onKeyDown:G,value:d,onChange:e=>{const t=(new Date).toISOString();p(e),e&&(D((0,n.A)((0,n.A)({},I),{},{user:localStorage.getItem("userTokenid"),type:e.id,date_created:t})),O((0,n.A)((0,n.A)({},B),{},{user:localStorage.getItem("userTokenid"),type:e.id,id:b.id,date_created:t,moneyType:e.name,user_name:localStorage.getItem("userToken")})))},options:T,getOptionLabel:e=>(0,f.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,f.jsx)("span",{children:"".concat(e.name," ")})}),getOptionValue:e=>"".concat(e.name),placeholder:"".concat((0,f.jsx)(y.A,{id:"Search"})),isClearable:!0,isSearchable:!0})}),(0,f.jsx)("div",{class:"valid-feedback",children:"Looks good!"})]}),(0,f.jsx)("div",{className:"coll-10",children:(0,f.jsx)(m.A,{onKeyDown:G,default_value:"",settings:k,handle_date:e=>{if(e){const{year:t,month:a,day:s}=e,o=(u().toGregorian(t,a,s),new Date);String(o.getHours()).padStart(2,"0"),String(o.getMinutes()).padStart(2,"0");const r=new Date(e.year,e.month-1,e.day,o.getHours(),o.getMinutes()).toISOString();D((0,n.A)((0,n.A)({},I),{},{date_created:r})),O((0,n.A)((0,n.A)({},B),{},{date_created:r}))}},lebal:(0,f.jsx)(y.A,{id:"Date"}),setSelectedDay:L,selectedDay:Y})}),(0,f.jsxs)("div",{className:"col-10 ms-4 m-10 mt-5 ps-3 d-flex",children:[(0,f.jsx)("a",{className:"text-center form-control btn btn-danger text-light me-1 ms-1",style:{margin:"auto",width:"150px"},onClick:S,children:(0,f.jsx)(y.A,{id:"Cancel"})}),(0,f.jsx)("a",{className:"text-center btn form-control btn-success text-light ms-1",ref:H,style:{margin:"auto",width:"150px"},onClick:()=>{I._method="put",r.A.post(o.A.getAddress()+"/api/belance/"+b.id+"/",I,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))}}).then(e=>{P({position:"top-end",icon:"success",title:(0,f.jsx)(y.A,{id:"Your record has been updated!"}),showConfirmButton:!1,timer:800}),D({account:null,type:null,belance:0,date_created:"",user:null,isdelete:!1}),a(null),p(null),M(null),L(g()()),_(v.map(e=>e.id===B.id?B:e)),S()}).catch(e=>{P({position:"top-end",icon:"error",title:(0,f.jsx)(y.A,{id:"Not working ,please try again!"}),showConfirmButton:!1,timer:800})})},children:(0,f.jsx)(y.A,{id:"Submit"})})]})]})}},61238:(e,t,a)=>{a.d(t,{A:()=>u});var n=a(89379),s=a(65043),o=a(21443),r=a(92382),l=a(97),c=a(53226),i=a(70579);const d=e=>{let{isDisabled:t=!1,options:a=[],selectedOption:d,setSelectedOption:u,width:m="100%"}=e;const{formatMessage:p,locale:g}=(0,l.A)(),h="fa"===g,x={name:(0,i.jsx)(c.A,{id:"All Users"}),id:0},y=[x,...a];(0,s.useEffect)(()=>{d||u(x)},[d,u,x]);const f={control:(e,t)=>(0,n.A)((0,n.A)({},e),{},{fontFamily:"en"!==localStorage.getItem("language")&&"'CustomFont1', sans-serif",backgroundColor:"#fff",zIndex:1,borderRadius:"8px",border:t.isFocused?"2px solid #4f46e5":"1px solid #d1d5db",boxShadow:t.isFocused?"0 0 5px rgba(79, 70, 229, 0.5)":"none","&:hover":{border:"1px solid #4f46e5"},minHeight:"39px",padding:"4px 8px",textAlign:h?"right":"left",direction:h?"rtl":"ltr"}),menu:e=>(0,n.A)((0,n.A)({},e),{},{fontFamily:"en"!==localStorage.getItem("language")&&"'CustomFont1', sans-serif",borderRadius:"8px",boxShadow:"0px 4px 10px rgba(0, 0, 0, 0.1)",overflow:"hidden",textAlign:h?"right":"left",direction:h?"rtl":"ltr"}),option:(e,t)=>{let{isFocused:a,isSelected:s}=t;return(0,n.A)((0,n.A)({},e),{},{fontFamily:"en"!==localStorage.getItem("language")&&"'CustomFont1', sans-serif",backgroundColor:s?"#4f46e5":a?"#e0e7ff":"#fff",color:s?"#fff":"#111827",padding:h?"12px 16px 12px 8px":"12px 8px 12px 16px",cursor:"pointer",fontSize:"14px",textAlign:h?"right":"left","&:active":{backgroundColor:"#4338ca"}})},singleValue:e=>(0,n.A)((0,n.A)({},e),{},{fontFamily:"en"!==localStorage.getItem("language")&&"'CustomFont1', sans-serif",fontWeight:"bold",color:"#4f46e5",fontSize:"14px",textAlign:h?"right":"left",direction:h?"rtl":"ltr"}),placeholder:e=>(0,n.A)((0,n.A)({},e),{},{fontFamily:"en"!==localStorage.getItem("language")&&"'CustomFont1', sans-serif",fontSize:"14px",color:"#6b7280",textAlign:h?"right":"left",direction:h?"rtl":"ltr"}),dropdownIndicator:e=>(0,n.A)((0,n.A)({},e),{},{fontFamily:"en"!==localStorage.getItem("language")&&"'CustomFont1', sans-serif",padding:"8px"}),menuPortal:e=>(0,n.A)((0,n.A)({},e),{},{zIndex:1e4}),input:e=>(0,n.A)((0,n.A)({},e),{},{fontFamily:"en"!==localStorage.getItem("language")&&"'CustomFont1', sans-serif",textAlign:h?"right":"left"})};return(0,i.jsx)("div",{className:"mt-3",style:{width:m},dir:h?"rtl":"ltr",children:(0,i.jsx)(o.Ay,{classNamePrefix:"custom-select",value:d,onChange:e=>{u(e)},options:y,getOptionLabel:e=>e.name,getOptionValue:e=>e.id,placeholder:p({id:"select.placeholder"})||(h?"انتخاب کنید...":"Select..."),isClearable:!1,isSearchable:!1,isDisabled:t,menuPortalTarget:document.body,styles:f,components:{DropdownIndicator:e=>{let{innerProps:t}=e;return(0,i.jsx)("div",(0,n.A)((0,n.A)({},t),{},{className:h?"pl-2 text-gray-500":"pr-2 text-gray-500",children:(0,i.jsx)(r.A,{size:20})}))},ClearIndicator:null}})})};d.defaultProps={isDisabled:!1,options:[],selectedOption:null,width:"100%"};const u=d},83601:(e,t,a)=>{t.dT=void 0;var n=a(16685),s=n.gregorianToJalali;n.jalaliToGregorian,t.dT=function(e,t,a){if("number"!=typeof e){var n=new Date(e),o=n.getFullYear(),r=n.getMonth()+1,l=n.getDate();return s(o,r,l)}return s(e,t,a)}}}]);
//# sourceMappingURL=7624.251bdfb5.chunk.js.map